{"ast":null,"code":"import moment from 'moment';\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport * as yup from \"yup\";\nimport { useStore, mapGetters, mapActions } from \"vuex\";\nimport VPagination from \"@hennge/vue3-pagination\";\nimport \"@hennge/vue3-pagination/dist/vue3-pagination.css\";\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport '@/assets/css/custom.css';\nimport $ from 'jquery';\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n    VPagination\n  },\n\n  data() {\n    const store = useStore();\n    const validationCreate = yup.object().shape({\n      actualDate: yup.string().required(\"Date is required\"),\n      scheduleTitle: yup.string().required(\"Schedule title is required\"),\n      // scheduleDetail: yup\n      //   .string()\n      //   .required(\"Schedule details is required\"), \n      // fromTime: yup\n      //   .string()\n      //   .required(\"From time is required\"), \n      // toTime: yup\n      //   .string()\n      //   .required(\"To time is required\"), \n      scheduleStatus: yup.string().required(\"Status is required\")\n    });\n    const validationEdit = yup.object().shape({\n      // eventDate: yup\n      //   .string()\n      //   .required(\"Event date is required\"),\n      actualDate: yup.string().required(\"Date is required\"),\n      scheduleTitle: yup.string().required(\"Schedule title is required\"),\n      // scheduleDetail: yup\n      //   .string()\n      //   .required(\"Schedule details is required\"), \n      // fromTime: yup\n      //   .string()\n      //   .required(\"From time is required\"), \n      // toTime: yup\n      //   .string()\n      //   .required(\"To time is required\"), \n      scheduleStatus: yup.string().required(\"Status is required\")\n    });\n    return {\n      editor: ClassicEditor,\n      editorData: '<p>Content of the editor.</p>',\n      editorConfig: {\n        toolbar: {\n          items: ['paragraph', 'heading', 'bold', 'italic', 'link', 'BulletedList', 'NumberedList', 'undo', 'redo', 'aignment']\n        }\n      },\n      backend_url: process.env.VUE_APP_API_URL,\n      store,\n      schedules: {},\n      scheduleDate: '',\n      eventDate: '',\n      actualDate: '',\n      scheduleTitle: '',\n      scheduleDetail: '',\n      fromTime: '',\n      toTime: '',\n      scheduleStatus: 1,\n      loading: false,\n      remark: '',\n      venue: '',\n      mapLink: '',\n      id: 0,\n      query: {\n        page: 1,\n        search: \"\"\n      },\n      myValue: '',\n      validationCreate: validationCreate,\n      validationEdit: validationEdit,\n      scheduleForm: validationCreate,\n      schedulesArr: [],\n      eventId: 0,\n      allSchedule: {}\n    };\n  },\n\n  computed: { ...mapGetters([\"activeEventTitleForSchedule\", \"schedulePaginatedData\", \"isLoading\", \"isDeleting\", \"deletedData\", \"isCreating\", \"createdScheduleData\", \"isUpdating\", \"updatedScheduleData\", \"formAction\", \"messagee\", \"successStatus\"])\n  },\n  methods: { ...mapActions([\"fetchAllSchedule\", \"deleteSchedule\", \"storeSchedule\", \"updateSchedule\"]),\n\n    //Print Schedule\n    printSchedule() {\n      $(document).ready(function () {\n        $('#modalForPrintSchedule').modal('show');\n      });\n      $('#datatablePrint').DataTable().destroy();\n      this.axios.get(this.backend_url + \"schedules\").then(res => {\n        this.allSchedule = res.data.data;\n        $(document).ready(function () {\n          $('#datatablePrint').DataTable({\n            dom: '<\"top\"Bfi>rt<\"top\"lp><\"clear\">',\n            buttons: [{\n              extend: 'csv',\n              messageTop: 'Schedule Informations',\n              title: 'Asf 2022 Schedule Information Table'\n            }, {\n              extend: 'print',\n              messageTop: 'Schedule Informations',\n              title: 'Asf 2022 Schedule Information Table'\n            }]\n          });\n          $('.buttons-print').each(function () {\n            $(this).removeClass('btn-default').addClass('print-button');\n          });\n          $('.buttons-csv').each(function () {\n            $(this).removeClass('btn-default').addClass('csv-button');\n          });\n          $('.dt-buttons').each(function () {\n            $(this).css({\n              float: 'left'\n            });\n          });\n          $('.dataTables_length').each(function () {\n            $(this).css({\n              margin: '10px'\n            });\n          });\n          $('#datatablePrint .dataTables_filter').each(function () {\n            $(this).css({\n              float: 'right'\n            });\n          });\n        });\n      });\n    },\n\n    getResults() {\n      this.fetchAllSchedule(this.query);\n    },\n\n    searchSchedules() {\n      this.query.page = null;\n      this.fetchAllSchedule(this.query);\n    },\n\n    // button click for open modal\n    addSchedule() {\n      this.scheduleTitle = \"\";\n      this.scheduleDetail = \"\";\n      this.venue = \"\";\n      this.mapLink = \"\";\n      this.schedulesArr = [{\n        designation: '',\n        resourcePerson: '',\n        from: '',\n        to: '',\n        title: '',\n        detail: ''\n      }];\n      this.$refs.form.resetForm();\n      $(document).ready(function () {\n        $('#exampleModalCenter').modal('show');\n      });\n    },\n\n    handleUser(schedule) {\n      if (this.$store.getters.formAction == 'insert') {\n        this.storeSchedule({\n          title: this.scheduleTitle,\n          details: this.scheduleDetail,\n          event_id: schedule.eventDate,\n          date: schedule.actualDate,\n          venue: schedule.venue,\n          map_link: schedule.mapLink,\n          // from: schedule.fromTime,\n          // to: schedule.toTime,\n          schedules: JSON.stringify(this.schedulesArr),\n          status: schedule.scheduleStatus\n        });\n      } else {\n        //edit\n        this.updateSchedule({\n          id: this.id,\n          title: this.scheduleTitle,\n          details: this.scheduleDetail,\n          event_id: this.eventId,\n          date: schedule.actualDate,\n          venue: schedule.venue,\n          map_link: schedule.mapLink,\n          // from: schedule.fromTime,\n          // to: schedule.toTime,\n          schedules: JSON.stringify(this.schedulesArr),\n          status: schedule.scheduleStatus\n        });\n      }\n\n      $(document).ready(function () {\n        $('#exampleModalCenter').modal('hide');\n      });\n    },\n\n    onEdit(user) {\n      $(document).ready(function () {\n        $('#exampleModalCenter').modal('show');\n      });\n      this.id = user.id;\n      this.scheduleTitle = user.title;\n      this.scheduleDetail = user.details;\n      this.eventId = user.event_id;\n      this.eventDate = user.event_id;\n      this.actualDate = user.date;\n      this.venue = user.venue;\n      this.mapLink = user.map_link;\n      this.fromTime = user.from;\n      this.toTime = user.to;\n      this.scheduleStatus = user.status;\n      this.$store.commit('fromActionStatus', 'edit');\n      this.scheduleForm = this.validationEdit;\n\n      if (user.schedules != null) {\n        this.schedulesArr = JSON.parse(user.schedules);\n      } else {\n        this.schedulesArr = [];\n      }\n    },\n\n    deleteUserModal(id) {\n      this.$swal.fire({\n        text: \"Are you sure to delete the user ?\",\n        icon: \"error\",\n        cancelButtonText: \"Cancel\",\n        confirmButtonText: \"Yes, Confirm Delete\",\n        showCancelButton: true\n      }).then(result => {\n        if (result[\"isConfirmed\"]) {\n          // Put delete logic\n          this.deleteSchedule(id);\n          this.fetchAllSchedule({\n            page: 1,\n            search: ''\n          });\n          this.$swal.fire({\n            text: \"Success, User has been deleted.\",\n            icon: \"success\",\n            position: 'top-end',\n            timer: 1000\n          });\n        }\n      });\n    },\n\n    //Data Return\n    formatDate(value) {\n      return moment(value).format('DD MMMM YYYY');\n    },\n\n    addNewSchedule: function () {\n      this.schedulesArr.push({\n        from: '',\n        to: '',\n        title: '',\n        detail: ''\n      });\n    },\n\n    removeSchedule(index) {\n      console.log(this.schedulesArr.length);\n\n      if (this.schedulesArr.length > 1) {\n        this.schedulesArr.splice(index, 1);\n      }\n    }\n\n  },\n\n  created() {\n    this.fetchAllSchedule(this.query);\n  },\n\n  watch: {\n    createdScheduleData: function () {\n      if (this.createdScheduleData !== null && !this.isCreating) {\n        this.fetchAllSchedule({\n          page: 1,\n          search: ''\n        });\n        this.$swal.fire({\n          text: \"Success, Schedule has been added successfully.\",\n          icon: \"success\",\n          position: \"top-end\",\n          timer: 1000\n        });\n        this.$refs.form.resetForm();\n      }\n    },\n    updatedScheduleData: function () {\n      if (this.updatedScheduleData != null && !this.isUpdating) {\n        this.fetchAllSchedule({\n          page: 1,\n          search: ''\n        });\n        this.$store.commit('fromActionStatus', 'insert');\n        this.scheduleForm = this.validationCreate;\n        this.$swal.fire({\n          text: \"Success, Schedule has been Updated.\",\n          icon: \"success\",\n          position: \"top-end\",\n          timer: 1000\n        });\n        this.$refs.form.resetForm();\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["moment","Form","Field","ErrorMessage","yup","useStore","mapGetters","mapActions","VPagination","ClassicEditor","$","components","data","store","validationCreate","object","shape","actualDate","string","required","scheduleTitle","scheduleStatus","validationEdit","editor","editorData","editorConfig","toolbar","items","backend_url","process","env","VUE_APP_API_URL","schedules","scheduleDate","eventDate","scheduleDetail","fromTime","toTime","loading","remark","venue","mapLink","id","query","page","search","myValue","scheduleForm","schedulesArr","eventId","allSchedule","computed","methods","printSchedule","document","ready","modal","DataTable","destroy","axios","get","then","res","dom","buttons","extend","messageTop","title","each","removeClass","addClass","css","float","margin","getResults","fetchAllSchedule","searchSchedules","addSchedule","designation","resourcePerson","from","to","detail","$refs","form","resetForm","handleUser","schedule","$store","getters","formAction","storeSchedule","details","event_id","date","map_link","JSON","stringify","status","updateSchedule","onEdit","user","commit","parse","deleteUserModal","$swal","fire","text","icon","cancelButtonText","confirmButtonText","showCancelButton","result","deleteSchedule","position","timer","formatDate","value","format","addNewSchedule","push","removeSchedule","index","console","log","length","splice","created","watch","createdScheduleData","isCreating","updatedScheduleData","isUpdating"],"sourceRoot":"","sources":["/var/www/html/PMS_PROJECT/asf-admin/src/components/Schedule/Schedule.vue"],"sourcesContent":["<template>\n<div>\n  <h4 class=\"text-bold heading-style\">Schedules</h4>\n  <div class=\"card card-default\">\n    <div class=\"card-header\">\n      <div class=\"col-8\">\n                <!-- Add New Schedule Button -->\n                <button class=\"add-button btn-sm\"\n                @click=\"addSchedule\"\n                > \n                  <font-awesome-icon icon=\"fa-solid  fa-plus\" /> \n                  Add New Schedule\n                </button>\n                <button class=\"btn btn-success ml-2\" style=\"padding:5px 6px\" @click=\"printSchedule\">\n                        <font-awesome-icon icon=\"fa-solid  fa-rectangle-list\" />\n                        Export\n                </button>\n              </div>\n    </div>\n    <div class=\"card-body\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n\n          <div class=\"user-list\" style=\"position:relative; top:-20px;\">\n            <div class=\"row mt-2 mb-2 ml-0 mr-0\">\n              <div class=\"col-12\">\n                <div class=\"col-3 float-right\">\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"Search Schedule...\"\n                  @input=\"searchSchedules\"\n                  v-model=\"query.search\"\n                />\n              </div>\n              </div>\n\n            </div>\n\n            <div class=\"pl-2 pr-2\">\n              <div class=\"\" v-if=\"!isLoading\" style=\"border:1px solid #eeeeee\">\n              <div class=\"col-md-12\">\n                <div class=\"row border-bottom border-top p-2 bg-light\">\n                  <div class=\"col-1\">Sl </div>\n                  <div class=\"col-2\">Date</div>\n                  <div class=\"col-6\">Title</div>\n                  <div class=\"col-3\">Actions</div>\n                </div>\n              </div>\n                <div class=\"pt-1 pl-2 pb-1 pl-2 customize-border\"  v-for=\"(schedule,index) in schedulePaginatedData.data\" :key=\"schedule.id\">\n                  <div class=\"row border-1 pb-1\">\n                    <div class=\"col-1 text-left\">\n                      {{ index + 1 }}\n                    </div>\n                    <div class=\"col-2\">\n                      <strong class=\"text-info\">{{ formatDate(schedule.date) }}</strong>\n                    </div>\n                    <div class=\"col-6\" v-html=\"schedule.title\">\n                    </div>\n\n                    <div class=\"col-3\">\n                      <button\n                        class=\"btn btn-warning mx-2 btn-sm\"\n                        title=\"Edit Shedule\"\n                        @click=\"onEdit(schedule)\"\n                      >\n                      \n                        <font-awesome-icon icon=\"fa-solid  fa-pencil\" />\n                      </button>\n                      <button\n                        class=\"btn btn-danger mx-2 btn-sm\"\n                        title=\"Delete Schedule\"\n                        @click=\"deleteUserModal(schedule.id)\">\n                        <font-awesome-icon icon=\"fa-solid  fa-trash\" />\n                      </button>\n                    </div>\n\n                  </div>\n                </div>\n              </div>\n\n              <div v-if=\"isLoading\" class=\"text-center pt-0 pb-0 pl-5 pr-5 mt-5 mb-5 d-flex align-items-center\">\n                <strong>Loading...</strong>\n                <div class=\"spinner-border ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n              </div>\n            </div>\n            \n\n            <div v-if=\"schedulePaginatedData.pagination != null\" class=\"vertical-center mt-3 mb-5\">\n          \n              <v-pagination\n                v-model=\"query.page\"\n                :pages=\"schedulePaginatedData.pagination.total_pages\"\n                :range-size=\"2\"\n                active-color=\"#DCEDFF\"\n                @update:modelValue=\"getResults\"\n                :class=\"justify-center\"\n              />\n            </div>        \n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n  <!-- Modal For Schedule -->\n  <div class=\"modal fade\" id=\"exampleModalCenter\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered modal-xl\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Shedule Form</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\" id=\"ck-control\">\n          <div class=\"row justify-content-center mt-2 mb-2 ml-0 mr-0\">\n                <div class=\"col-md-12 form-bg\">\n                    <Form @submit=\"handleUser\" :validation-schema=\"scheduleForm\" ref=\"form\">\n                      <div class=\"row mb-3\">\n                        <div class=\"col-md-12\">\n                            <div class=\"input-group border border-dark rounded\">\n                                <div class=\"input-group-prepend\">\n                                  <span class=\"input-group-text p4 input-group-text-label\" >Event Title </span>\n                                </div>\n                                <label class=\"ml-3 mt-2 \">{{activeEventTitleForSchedule.title}}</label>\n                            </div>\n                        </div>\n                      </div>\n                \n                        <!-- Event Date Dropdown && Event Actual Date -->\n                        <div class=\"row\">\n                          <!-- Event Date -->\n                          <div class=\"col-md-6 form-group\">\n                              <div class=\"input-group mb-2\">\n                                  <div class=\"input-group-prepend\">\n                                      <span class=\"input-group-text p4\" >Date*</span>\n                                  </div>\n                                  <Field name=\"actualDate\" type=\"date\" v-model=\"actualDate\" class=\"form-control\" autocomplete=\"off\"/>\n                              </div>\n                              <ErrorMessage name=\"actualDate\" v-model=\"actualDate\" class=\"error-feedback\" />\n                          </div>\n\n                          <div class=\"col-md-6 form-group\">\n                                  <div class=\"input-group mb-2\">\n                                    <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text p4\" >Status*</span>\n                                    </div>\n                                    <Field name=\"scheduleStatus\" as=\"select\" class=\"form-control\" v-model=\"scheduleStatus\">\n                                      <option value=\"1\">Active</option>\n                                      <option value=\"0\">Inactive</option>\n                                    </Field>\n                                  </div>\n                                  <ErrorMessage name=\"scheduleStatus\" v-model=\"scheduleStatus\" class=\"error-feedback\" />\n                              </div>\n                          <!-- End -->\n                        </div>\n\n                        <!-- Schedule Title -->\n                        <div class=\"row\">\n                          <div class=\"col-md-12 form-group\">\n                            <div class=\"mb-2\">\n                              <div class=\"input-group mb-2\">\n                                  <div class=\"input-group-prepend\">\n                                      <span class=\"input-group-text p4\" >Schedule Title*</span>\n                                  </div>\n                                  <Field name=\"scheduleTitle\" type=\"text\" v-model=\"scheduleTitle\" class=\"form-control\" autocomplete=\"off\"/>\n                                  \n                              </div>\n                              <div class=\"\"><ErrorMessage name=\"scheduleTitle\" v-model=\"scheduleTitle\" class=\"error-feedback\" /></div>\n                            </div>\n                          </div>\n                        </div>\n                        <!-- End -->\n                        <!-- Venue -->\n                        <div class=\"row\">\n                          <div class=\"col-md-12 form-group\">\n                            <div class=\"mb-2\">\n                              <div class=\"input-group mb-2\">\n                                  <div class=\"input-group-prepend\">\n                                      <span class=\"input-group-text p4\" ><font-awesome-icon class=\"mr-2\" icon=\"fa-solid fa-location-dot\" /> Venue</span>\n                                  </div>\n                                  <Field name=\"venue\" type=\"text\" v-model=\"venue\" class=\"form-control\" autocomplete=\"off\"/>\n                                  \n                              </div>\n                              <div class=\"\"><ErrorMessage name=\"venue\" class=\"error-feedback\" /></div>\n                            </div>\n                          </div>\n                        </div>\n                        <!-- End -->\n\n                        <!-- Map Link -->\n                        <div class=\"row\">\n                          <div class=\"col-md-12 form-group\">\n                            <div class=\"mb-2\">\n                              <div class=\"input-group mb-2\">\n                                  <div class=\"input-group-prepend\">\n                                      <span class=\"input-group-text p4\" > <font-awesome-icon class=\"mr-2\" icon=\"fa-solid fa-map-location-dot\" /> Map Link</span>\n                                  </div>\n                                  <Field name=\"mapLink\" type=\"text\" v-model=\"mapLink\" class=\"form-control\" autocomplete=\"off\"/>\n                                  \n                              </div>\n                              <div class=\"\"><ErrorMessage name=\"mapLink\" class=\"error-feedback\" /></div>\n                            </div>\n                          </div>\n                        </div>\n                        <!-- End -->\n\n                        <!-- Schedule Details -->\n                        <div class=\"row\">\n                          <div class=\"col-md-12 form-group\">\n                            <div class=\"mb-2\">\n                                <div class=\"\">\n                                    <span class=\"input-group-text p4 mb-2\" >Summary</span>\n                                </div>\n                                <ckeditor name=\"scheduleDetail\" autocomplete=\"off\" class=\"form-control\" :editor=\"editor\" v-model=\"scheduleDetail\" :config=\"editorConfig\" />\n                            </div>\n                            <ErrorMessage name=\"scheduleDetail\" v-model=\"scheduleDetail\" class=\"error-feedback\" />\n                          </div>\n                        </div>\n                        <!-- End -->\n\n                        <!-- From time,To time & Status-->\n                        <div class=\"justify-content-center\">\n                          <fieldset class=\"field_set_item \">\n                          <legend align=\"center\" class=\"legendItem\"> Time Schedules</legend>\n                          <div class=\"row\">\n                            <div class=\"col-md-12 jumbotron p-3\" v-for=\"(field, index) in schedulesArr\" :key=\"index\">\n                              <button class=\"btn btn-danger\" type=\"button\" @click=\"removeSchedule(index)\" style=\"position:absolute; right:0; top:-12px; z-index: 99; padding:0 6px\">X</button>\n                              <div class=\"row\">\n                                <div class=\"col-md-12 mb-3\">\n                                  <div class=\"input-group\">\n                                    <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text p4\" >Resource Person</span> \n                                    </div>\n                                    <input type=\"text\" v-model=\"field.resourcePerson\" class=\"form-control\" autocomplete=\"off\"/>\n                                  </div>\n                                </div>\n                              </div>\n                              <div class=\"row\">\n                                <div class=\"col-md-12 mb-3\">\n                                  <div class=\"input-group\">\n                                    <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text p4\" >Designation</span> \n                                    </div>\n                                    <input type=\"text\" v-model=\"field.designation\" class=\"form-control\" autocomplete=\"off\"/>\n                                  </div>\n                                </div>\n                              </div>\n                              <div class=\"row\">\n                                  <!-- From Time -->\n                                    <div class=\"col-md-6 mb-2 d-inline-block  form-group\">\n                                        <div class=\"input-group mb-2\">\n                                          <div class=\"input-group-prepend\">\n                                              <span class=\"input-group-text p4\" >From Time*</span>\n                                          </div>\n                                          <input type=\"text\" v-model=\"field.from\" class=\"form-control\" autocomplete=\"off\"/>\n                                        </div>\n                                        \n                                    </div>\n                                  <!-- End -->\n\n                                  <!-- To Time -->\n                                    <div class=\"col-md-6 mb-2 d-inline-block form-group\">\n                                        <div class=\"input-group mb-2\">\n                                          <div class=\"input-group-prepend\">\n                                              <span class=\"input-group-text p4\" >To Time*</span>\n                                          </div>\n                                          <input type=\"text\" v-model=\"field.to\" class=\"form-control\" autocomplete=\"off\"/>\n                                        </div>\n                                    </div>\n                                  <!-- End -->\n                              </div>\n                              <div class=\"row\">\n                                <div class=\"col-md-12\">\n                                  <div class=\"input-group\">\n                                    <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text p4\" >Title</span>\n                                    </div>\n                                    <input type=\"text\" v-model=\"field.title\" class=\"form-control\" autocomplete=\"off\"/>\n                                  </div>\n                                </div>\n                                <div class=\"col-md-12 mt-3\">\n                                  <div style=\"text-align: center; padding:5px; border-left:1px solid #ced4da; border-top:1px solid #ced4da; border-right:1px solid #ced4da;\">Detail</div>\n                                  <ckeditor autocomplete=\"off\" class=\"form-control\" :editor=\"editor\" v-model=\"field.detail\" :config=\"editorConfig\" />\n                                </div>\n                              </div>\n                            </div>\n                            <div class=\"col-md-12 m-0\">\n                              <button type=\"button\" class=\"d-block text-center btn btn-info btn-sm\" style=\"width:100%\" @click=\"addNewSchedule\"><font-awesome-icon icon=\"fa-solid  fa-plus\" /> Add Schedule</button>\n                            </div>\n                        <!-- <div class=\"col-md-12\">\n                          <pre>{{schedulesArr}}</pre>\n                        </div> -->\n                          </div>\n                        </fieldset>\n                        </div>\n\n                        <div class=\"modal-footer\">\n                          <div class=\"form-group\">\n                              <button class=\"btn btn-primary mr-2\" :disabled=\"isCreating || isUpdating\">\n                                <span v-show=\"isCreating\" class=\"spinner-border spinner-border-sm\"></span>\n                                Submit\n                              </button>\n\n                              <button class=\"btn btn-danger ml-2\" type=\"reset\">Reset</button>\n                          </div>\n                        </div>\n                    </Form>\n                </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n  <!-- End -->\n\n\n  <!-- Modal For Print Schedule -->\n  <div class=\"modal fade\" id=\"modalForPrintSchedule\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal-dialog-centered modal-xl\" role=\"document\">\n          <div class=\"modal-content\">\n              <div class=\"modal-header\">\n                  <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Schedules  </h5>\n                  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                      <span aria-hidden=\"true\">&times;</span>\n                  </button>\n              </div>\n              <div class=\"modal-body\">\n                  <div class=\"row\">\n            <div class=\"col-md-12\">\n              <div class=\"table-responsive\">\n              <table class=\"table table-striped table-bordered\" id=\"datatablePrint\">\n                  <thead>\n                      <tr>\n                      <th scope=\"col\" >SL</th>\n                      <th scope=\"col\" >Title</th>\n                      <th scope=\"col\" >Details</th>\n                      <th scope=\"col\" >Date</th> \n                      <th scope=\"col\" >Status</th>\n                      </tr>\n                  </thead>\n                  <tbody>\n                      <tr v-for=\"(schedule,index) in allSchedule\" :key=\"schedule.id\">\n                      <th scope=\"row\">{{index+1}}</th>\n                      <td > {{schedule.title}}</td>\n                      <td v-html=\"schedule.details\"></td>\n                      <td >{{$filters.myDateFormate(schedule.date)}}</td>\n                      <td > {{schedule.status == 1 ? 'Active' : 'Inactive'}}</td>\n                      </tr>\n                  </tbody>\n              </table>\n          </div>      \n            </div> \n          </div>\n\n              </div>\n              <div class=\"modal-footer\">\n\n              </div>\n          </div>\n      </div>\n    </div>\n  <!-- End -->\n\n\n</div>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport * as yup from \"yup\";\nimport {useStore, mapGetters, mapActions } from \"vuex\"\nimport VPagination from \"@hennge/vue3-pagination\";\nimport \"@hennge/vue3-pagination/dist/vue3-pagination.css\";\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport '@/assets/css/custom.css';\nimport $ from 'jquery';\n\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n    VPagination,\n  },\n\n  data() {\n    const store = useStore();\n    const validationCreate = yup.object().shape({\n          \n          actualDate: yup\n            .string()\n            .required(\"Date is required\"),\n          scheduleTitle: yup\n            .string()\n            .required(\"Schedule title is required\"),\n          // scheduleDetail: yup\n          //   .string()\n          //   .required(\"Schedule details is required\"), \n          // fromTime: yup\n          //   .string()\n          //   .required(\"From time is required\"), \n          // toTime: yup\n          //   .string()\n          //   .required(\"To time is required\"), \n          scheduleStatus: yup\n            .string()\n            .required(\"Status is required\"),\n      });\n\n      const validationEdit = yup.object().shape({\n          // eventDate: yup\n          //   .string()\n          //   .required(\"Event date is required\"),\n          actualDate: yup\n            .string()\n            .required(\"Date is required\"),\n          scheduleTitle: yup\n            .string()\n            .required(\"Schedule title is required\"),\n          // scheduleDetail: yup\n          //   .string()\n          //   .required(\"Schedule details is required\"), \n          // fromTime: yup\n          //   .string()\n          //   .required(\"From time is required\"), \n          // toTime: yup\n          //   .string()\n          //   .required(\"To time is required\"), \n          scheduleStatus: yup\n            .string()\n            .required(\"Status is required\"),\n      });\n\n    return {\n        editor: ClassicEditor,\n        editorData: '<p>Content of the editor.</p>',\n                editorConfig: {\n                    toolbar: {\n                        items: [\n                          'paragraph',\n                          'heading',\n                          'bold',\n                          'italic',\n                          'link',\n                          'BulletedList',\n                          'NumberedList',\n                          'undo',\n                          'redo',\n                          'aignment'\n                   \n                        ]\n                    }\n      },\n\n      backend_url: process.env.VUE_APP_API_URL, \n      store,\n      schedules: {},\n      scheduleDate:'',\n      eventDate: '',\n      actualDate: '',\n      scheduleTitle: '',\n      scheduleDetail: '',\n      fromTime: '',\n      toTime: '',\n      scheduleStatus: 1,\n      loading: false,\n      remark: '',\n      venue:'',\n      mapLink:'',\n      id:0,\n      query: {\n        page: 1,\n        search: \"\",\n      },\n      myValue: '',\n      validationCreate: validationCreate,\n      validationEdit: validationEdit,\n      scheduleForm: validationCreate,    \n      \n      schedulesArr: [],\n      eventId:0,\n      allSchedule:{}\n    };\n  },\n  \n  computed: {\n    ...mapGetters([\"activeEventTitleForSchedule\",\"schedulePaginatedData\",\"isLoading\", \"isDeleting\", \"deletedData\"\n              , \"isCreating\", \"createdScheduleData\", \"isUpdating\", \"updatedScheduleData\", \"formAction\",\"messagee\",\"successStatus\"]) },\n\n  methods: {\n    ...mapActions([\"fetchAllSchedule\", \"deleteSchedule\", \"storeSchedule\",\"updateSchedule\",]),\n\n    //Print Schedule\n    printSchedule(){\n      $(document).ready(function () {\n                $('#modalForPrintSchedule').modal('show');\n            });\n            $('#datatablePrint').DataTable().destroy();\n            this.axios\n                .get(this.backend_url + \"schedules\")\n                .then((res) => {\n                this.allSchedule = res.data.data;\n                $(document).ready(function() {\n                    $('#datatablePrint').DataTable( {\n                        dom: '<\"top\"Bfi>rt<\"top\"lp><\"clear\">', \n                        buttons: [\n                          {\n                                extend: 'csv',\n                                messageTop: 'Schedule Informations',\n                                title: 'Asf 2022 Schedule Information Table'\n                           },\n                           {\n                                extend: 'print',\n                                messageTop: 'Schedule Informations',\n                                title: 'Asf 2022 Schedule Information Table'\n                           },\n                        ]\n                    } );\n                    $('.buttons-print').each(function() {\n                    $(this).removeClass('btn-default').addClass('print-button')\n                    })\n\n                    $('.buttons-csv').each(function() {\n                    $(this).removeClass('btn-default').addClass('csv-button')\n                    }) \n\n                    $('.dt-buttons').each(function() { \n                    $(this).css({ float: 'left' });\n                    })\n\n\n                    $('.dataTables_length').each(function() { \n                    $(this).css({ margin: '10px' });\n                    })\n\n                    $('#datatablePrint .dataTables_filter').each(function() { \n                    $(this).css({ float: 'right' });\n                    })\n\n                } );\n            })\n\n    },\n    getResults() {\n      this.fetchAllSchedule(this.query);\n    },\n\n    searchSchedules() {\n     this.query.page = null;\n     this.fetchAllSchedule(this.query);\n    },\n\n    // button click for open modal\n    addSchedule() { \n      this.scheduleTitle = \"\";\n      this.scheduleDetail = \"\";\n      this.venue = \"\";\n      this.mapLink = \"\";\n      this.schedulesArr = [{designation:'', resourcePerson:'',from: '',to: '', title:'', detail:'' }];\n      this.$refs.form.resetForm();\n      $(document).ready(function () {\n        $('#exampleModalCenter').modal('show');\n      });\n    },\n\n    handleUser(schedule) {\n    \n      if (this.$store.getters.formAction == 'insert') {\n        \n        this.storeSchedule({\n          title: this.scheduleTitle,\n          details: this.scheduleDetail,\n          event_id: schedule.eventDate,\n          date: schedule.actualDate,\n          venue : schedule.venue,\n          map_link : schedule.mapLink,\n          // from: schedule.fromTime,\n          // to: schedule.toTime,\n          schedules: JSON.stringify(this.schedulesArr),\n          status:schedule.scheduleStatus,\n\n        });                 \n      }else{  //edit\n        this.updateSchedule({\n          id: this.id,\n          title: this.scheduleTitle,\n          details: this.scheduleDetail,\n          event_id: this.eventId,\n          date: schedule.actualDate,\n          venue : schedule.venue,\n          map_link : schedule.mapLink,\n          // from: schedule.fromTime,\n          // to: schedule.toTime,\n          schedules: JSON.stringify(this.schedulesArr),\n          status:schedule.scheduleStatus\n        });\n      }\n      $(document).ready(function () {\n        $('#exampleModalCenter').modal('hide');\n      });   \n    },\n\n    onEdit(user) {\n      $(document).ready(function () {\n        $('#exampleModalCenter').modal('show');\n      });\n      this.id = user.id;\n      this.scheduleTitle = user.title;\n      this.scheduleDetail = user.details;\n      this.eventId = user.event_id;\n      this.eventDate = user.event_id;\n      this.actualDate = user.date;\n      this.venue = user.venue;\n      this.mapLink = user.map_link;\n      this.fromTime = user.from;\n      this.toTime = user.to;\n      this.scheduleStatus = user.status;\n      this.$store.commit('fromActionStatus', 'edit');\n      this.scheduleForm = this.validationEdit;\n      if(user.schedules != null){\n        this.schedulesArr = JSON.parse(user.schedules);\n      }else{\n        this.schedulesArr = [];\n      }\n    },\n\n    deleteUserModal(id) {\n      this.$swal\n        .fire({\n          text: \"Are you sure to delete the user ?\",\n          icon: \"error\",\n          cancelButtonText: \"Cancel\",\n          confirmButtonText: \"Yes, Confirm Delete\",\n          showCancelButton: true,\n        })\n        .then((result) => {\n          if (result[\"isConfirmed\"]) {\n            // Put delete logic\n              this.deleteSchedule(id);\n              \n                this.fetchAllSchedule({\n                page: 1,\n                search: ''\n                });\n            this.$swal.fire({\n              text: \"Success, User has been deleted.\",\n              icon: \"success\",\n              position: 'top-end',\n              timer: 1000,\n            });\n            \n          }\n        });\n    },\n    //Data Return\n    formatDate(value) {\n        return moment(value).format('DD MMMM YYYY')\n    }, \n\n    addNewSchedule: function () {\n      this.schedulesArr.push({ from: '',to: '', title:'', detail:'' });\n    },\n    removeSchedule(index){\n      console.log(this.schedulesArr.length);\n      if(this.schedulesArr.length > 1){\n        this.schedulesArr.splice(index, 1);\n      } \n    },\n\n  },\n\n  created() {\n   this.fetchAllSchedule(this.query);\n  },\n\n  watch: {   \n      createdScheduleData: function () {\n          if (this.createdScheduleData !== null && !this.isCreating) {\n        this.fetchAllSchedule({\n              page: 1,\n              search: ''\n            });\n        this.$swal.fire({\n          text: \"Success, Schedule has been added successfully.\",\n          icon: \"success\",\n          position: \"top-end\",\n          timer: 1000,\n        });\n        this.$refs.form.resetForm();\n      }\n    },\n\n    updatedScheduleData: function () {\n      if (this.updatedScheduleData != null && !this.isUpdating) {\n        this.fetchAllSchedule({\n              page: 1,\n              search: ''\n            });\n        this.$store.commit('fromActionStatus', 'insert');\n        this.scheduleForm = this.validationCreate;\n        this.$swal.fire({\n          text: \"Success, Schedule has been Updated.\",\n          icon: \"success\",\n          position: \"top-end\",\n          timer: 1000,\n        });\n        this.$refs.form.resetForm();\n      }\n    },\n\n\n  },\n\n}\n\n\n</script>\n\n<style scoped>\n\n  .ui.inverted.dimmer {\n    color: #009688 !important;\n\n  }\n\n  #ck-control-two div.ck-content {\n    max-height: 80px !important;\n    height: 80px;\n   }\n   .error-feedback {\n      position: absolute;\n      bottom: -15px;\n\n   }\n\n   .legendItem {\n    margin-top: -36px;\n    background-color: white;\n    padding: 0 7px;\n    display: inline-block;\n    width: auto;\n    line-height: 10px;\n}\n\n.field_set_item {\n    border-width: 2px;\n    border-style: groove;\n    border-color: threedface;\n    padding: 30px;\n}\n\n  @media (max-width: 1000px) {\n    .modal-xl {\n        max-width:90%;\n    }\n  }\n</style>"]},"metadata":{},"sourceType":"module"}