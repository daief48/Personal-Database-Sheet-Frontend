{"ast":null,"code":"import { createToast } from 'mosha-vue-toastify';\nimport 'mosha-vue-toastify/dist/style.css'; //import moment from 'moment';\n\nimport { Form, ErrorMessage, Field } from \"vee-validate\";\nimport { Cropper } from 'vue-advanced-cropper';\nimport 'vue-advanced-cropper/dist/style.css';\nimport * as yup from \"yup\";\nimport \"@hennge/vue3-pagination/dist/vue3-pagination.css\";\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport \"datatables.net-dt/js/dataTables.dataTables\";\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\";\nimport '@/assets/css/custom.css';\nimport $ from 'jquery';\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n    Cropper\n  },\n\n  data() {\n    const validationCreate = yup.object().shape({\n      link: yup.string().required(\"Link is required!\"),\n      orgName: yup.string().required(\"Organization name is required!\")\n    });\n    return {\n      editor: ClassicEditor,\n      editorData: '<p>Content of the editor.</p>',\n      editorConfig: {\n        toolbar: {\n          items: ['paragraph', 'heading', 'bold', 'italic', 'link', 'BulletedList', 'NumberedList', 'undo', 'redo', 'aignment']\n        }\n      },\n      base_url: this.backendUrl,\n      vedioForm: validationCreate,\n      partners: {},\n      link: '',\n      order: '',\n      orgName: '',\n      eventId: '',\n      updateId: '',\n      partnerStatus: 0,\n      image: '',\n      cropData: '',\n      img: '',\n      showImage: '',\n      editImageFlag: false,\n      formAction: 'insert',\n      allPartner: {},\n      eventTitle: ''\n    };\n  },\n\n  methods: {\n    cancelUpdate() {\n      location.reload();\n    },\n\n    //Print Partner\n    printPartner() {\n      $(document).ready(function () {\n        $('#modalForPrintPartner').modal('show');\n      });\n      $('#datatablePrint').DataTable().destroy();\n      this.axios.get(this.base_url + \"/api/getPartner\").then(res => {\n        this.allPartner = res.data.list;\n        console.log(this.allPartner);\n        $(document).ready(function () {\n          $('#datatablePrint').DataTable({\n            dom: '<\"top\"Bfi>rt<\"top\"lp><\"clear\">',\n            buttons: [{\n              extend: 'csv',\n              messageTop: 'Partner Informations',\n              title: 'Asf 2022 Partner Information Table'\n            }, {\n              extend: 'print',\n              messageTop: 'Partner Informations',\n              title: 'Asf 2022 Partner Information Table'\n            }]\n          });\n          $('.buttons-print').each(function () {\n            $(this).removeClass('btn-default').addClass('print-button');\n          });\n          $('.buttons-csv').each(function () {\n            $(this).removeClass('btn-default').addClass('csv-button');\n          });\n          $('.dt-buttons').each(function () {\n            $(this).css({\n              float: 'left'\n            });\n          });\n          $('.dataTables_length').each(function () {\n            $(this).css({\n              margin: '10px'\n            });\n          });\n          $('#datatablePrint .dataTables_filter').each(function () {\n            $(this).css({\n              float: 'right'\n            });\n          });\n        });\n      });\n    },\n\n    getPartners() {\n      $('#datatable').DataTable().destroy();\n      this.axios.get(this.base_url + \"/api/getPartner\").then(res => {\n        this.partners = res.data.list;\n        this.eventTitle = res.data.activeEvent.title;\n        $(document).ready(function () {\n          $('#datatable').DataTable();\n        });\n      });\n    },\n\n    onDetails(partner) {\n      this.vediosDetailsForModal = partner;\n      $(document).ready(function () {\n        $('#modalForShowDetails').modal('show');\n      });\n    },\n\n    onFileUpload(e) {\n      let file = e.target.files[0];\n      let reader = new FileReader();\n      this.img = '';\n\n      if (file[\"size\"] < 10111775) {\n        reader.onloadend = file => {\n          console.log(file);\n          this.img = reader.result;\n        };\n\n        reader.readAsDataURL(file);\n      } else {\n        alert(\"File size can not be bigger than 10 MB\");\n      }\n\n      $('#remarkModal').modal('show');\n    },\n\n    //Croping image(Crop(image) -> Button) =>\n    cropImage(e) {\n      console.log(e);\n      let reader = new FileReader();\n      console.log(reader);\n      this.image = this.cropData;\n      var pic = this.image;\n      $(document).ready(function () {\n        $('#remarkModal').modal('hide');\n        $('#prvImg').attr('src', pic);\n      });\n    },\n\n    //Croping image params\n    changes({\n      coordinates,\n      canvas\n    }) {\n      console.log(coordinates, canvas);\n      this.cropData = canvas.toDataURL(this.image);\n    },\n\n    //Insert Data\n    handleVideoInsert() {\n      this.axios.post(this.base_url + '/api/addPartner', {\n        org_name: this.orgName,\n        link: this.link,\n        order: this.order,\n        logo: this.image ? this.image : this.img,\n        status: this.partnerStatus\n      }).then(res => {\n        console.log(res);\n        setTimeout(createToast('Partner Information Add Successfully !', {\n          position: 'top-center',\n          transition: 'bounce',\n          timeout: 1500,\n          type: 'success'\n        }), 10000);\n        $(document).ready(function () {\n          $('#remarkModal').modal('hide');\n          $('#prvImg').attr('src', '@/assets/img/placeholder.png');\n        });\n        this.$refs.forminsert.resetForm();\n        this.getPartners();\n        setTimeout(function () {\n          location.reload();\n        }, 1000);\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n\n    // Update Data\n    handleVideoUpdate() {\n      this.axios.put(this.base_url + '/api/updatePartner/' + this.updateId, {\n        org_name: this.orgName,\n        link: this.link,\n        order: this.order,\n        event_id: this.eventId,\n        logo: this.image ? this.image : this.img,\n        status: this.partnerStatus\n      }).then(res => {\n        console.log(res);\n        createToast('Partner Information Updated Successfully !', {\n          position: 'top-center',\n          transition: 'bounce',\n          timeout: 1500,\n          type: 'success'\n        });\n        this.$refs.formUpdate.resetForm();\n        this.formAction = 'insert';\n        $(document).ready(function () {\n          $('#remarkModal').modal('hide');\n          $('#prvImg').attr('src', '@/assets/img/placeholder.png');\n        });\n        this.getPartners();\n        setTimeout(function () {\n          location.reload();\n        }, 1000);\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n\n    onDelete(id) {\n      this.axios.delete(this.base_url + '/api/deletePartner/' + id).then(result => {\n        console.log(result);\n        createToast('Partner Information Deleted Successfully !', {\n          position: 'top-center',\n          transition: 'bounce',\n          timeout: 1500,\n          type: 'success'\n        });\n        this.getPartners();\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    onEdit(partner) {\n      this.updateId = partner.id;\n      this.eventId = partner.event_id;\n      this.formAction = 'update';\n      this.editImageFlag = true;\n      this.link = partner.link;\n      this.orgName = partner.org_name;\n      this.eventId = partner.event_id;\n      this.order = partner.order;\n      this.partnerStatus = partner.status;\n      this.showImage = this.base_url + '/public/uploads/images/partners/' + partner.logo;\n    }\n\n  },\n\n  created() {\n    this.getPartners();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["createToast","Form","ErrorMessage","Field","Cropper","yup","ClassicEditor","$","components","data","validationCreate","object","shape","link","string","required","orgName","editor","editorData","editorConfig","toolbar","items","base_url","backendUrl","vedioForm","partners","order","eventId","updateId","partnerStatus","image","cropData","img","showImage","editImageFlag","formAction","allPartner","eventTitle","methods","cancelUpdate","location","reload","printPartner","document","ready","modal","DataTable","destroy","axios","get","then","res","list","console","log","dom","buttons","extend","messageTop","title","each","removeClass","addClass","css","float","margin","getPartners","activeEvent","onDetails","partner","vediosDetailsForModal","onFileUpload","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","alert","cropImage","pic","attr","changes","coordinates","canvas","toDataURL","handleVideoInsert","post","org_name","logo","status","setTimeout","position","transition","timeout","type","$refs","forminsert","resetForm","catch","err","handleVideoUpdate","put","event_id","formUpdate","onDelete","id","delete","error","onEdit","created"],"sourceRoot":"","sources":["/var/www/html/PMS_PROJECT/asf-admin/src/components/Partner/Partner.vue"],"sourcesContent":["<template>\n    <div>\n        <h4 class=\"text-bold heading-style\">Partners</h4>\n        <div class=\"card card-default\">\n            <div class=\"card-header\">\n        <button class=\"btn btn-success print-button-style\" style=\"padding:5px 6px\"  @click=\"printPartner\">\n                <font-awesome-icon icon=\"fa-solid  fa-rectangle-list\" />\n                Export\n        </button>\n        </div>\n\n        <div class=\"card-body\">\n            <div class=\"row\">\n\n                <div class=\"col-md-4 form-bg rounded\" style=\"border: 1px #eeeeee solid;\">\n\n                    <Form v-if=\"formAction == 'insert'\" @submit=\"handleVideoInsert\" :validation-schema=\"vedioForm\" ref=\"forminsert\">\n                        <div>\n\n                            <div class=\"row mb-3 mt-2\">\n                                <div class=\"col-md-12\">\n                                    <div class=\"input-group border border-dark rounded\">\n                                        <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text p4 input-group-text-label\" >Event Title </span>\n                                        </div>\n                                        <label class=\"ml-3 mt-2 \">{{eventTitle}}</label>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <!-- Org Name -->\n                            <div class=\"form-group\">\n                                <label for=\"orgName\">Organization Name*</label>\n                                <Field name=\"orgName\" type=\"text\" v-model=\"orgName\" class=\"form-control\" autocomplete=\"off\"/>\n                                <ErrorMessage name=\"orgName\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!--  Image -->\n                            <div class=\"form-group\">\n                                <div class=\"form-bg text-center p-3\">\n                                    <div class=\" box\" style=\"display:block\">\n                                        <div class=\"js--image-preview\" style=\"text-align:center\">\n                                            <img v-if=\"!editImageFlag\"\n                                            id=\"prvImg\" \n                                            src=\"@/assets/img/placeholder.png\"\n                                            style=\"max-width:100%;border: 3px #c5b7b7 solid;\"\n                                            class=\"\"\n                                            >\n\n                                            <img v-if=\"editImageFlag\"\n                                            id=\"prvImg\" \n                                            :src=\"showImage\"\n                                            style=\"max-width:100%; height:auto;border: 3px #c5b7b7 solid;\"\n                                            class=\"\"\n                                            >\n                                        </div>\n                                        \n                                        <div class=\"upload-options mt-3\">\n                                            <label class=\"upload-options\" for=\"imageUpload\">\n                                                <font-awesome-icon icon=\"fa-solid  fa-upload\"/> Select Logo  Image\n                                                <input \n                                                type=\"file\" \n                                                class=\"image-upload\"\n                                                id=\"imageUpload\" \n                                                accept=\"image/*\" \n                                                @change=\"onFileUpload\"\n                                                >\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <!-- End -->\n\n                            <!-- Link -->\n                            <div class=\"form-group\">\n                                <label for=\"link\">Link</label>\n                                <Field name=\"link\" type=\"text\" v-model=\"link\" class=\"form-control\" autocomplete=\"off\"/>\n                                <ErrorMessage name=\"link\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!-- Order -->\n                            <div class=\"form-group\">\n                                <label for=\"order\">Order</label>\n                                <Field name=\"order\" type=\"number\" v-model=\"order\" class=\"form-control\" autocomplete=\"off\"/>\n                                <ErrorMessage name=\"order\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!-- Status -->\n                            <div class=\"form-group\">\n                                <label for=\"vedioStatus\">Status</label>\n                                <Field name=\"vedioStatus\" as=\"select\" class=\"form-control\" v-model=\"partnerStatus\">\n                                \n                                <option value=\"1\">Active</option>\n                                <option value=\"0\">Inactive</option>\n                                </Field>\n                                <ErrorMessage name=\"vedioStatus\" class=\"error-feedback\" />\n                            </div>\n\n                            <div class=\"form-group\">\n                                <button class=\"btn btn-primary mr-2\" :disabled=\"isCreating || isUpdating\">\n                                <span v-show=\"isCreating\" class=\"spinner-border spinner-border-sm\"></span>\n                                Submit\n                                </button>\n                                <button class=\"btn btn-danger ml-2\" type=\"reset\">Reset</button>\n                            </div>\n\n                        </div>\n                    </Form>\n\n                    <Form v-if=\"formAction == 'update'\" @submit=\"handleVideoUpdate\" :validation-schema=\"vedioForm\" ref=\"formUpdate\">\n                        <div>\n\n                            <!-- Org Name -->\n                            <div class=\"form-group\">\n                                <label for=\"orgName\">Organization Name*</label>\n                                <Field name=\"orgName\" type=\"text\" v-model=\"orgName\" class=\"form-control\" autocomplete=\"off\"/>\n                                <ErrorMessage name=\"orgName\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!--  Image -->\n                            <div class=\"form-group\">\n                                <div class=\"form-bg text-center p-3\">\n                                    <div class=\" box\" style=\"display:block\">\n                                        <div class=\"js--image-preview\" style=\"text-align:center\">\n                                            <img v-if=\"!editImageFlag\"\n                                            id=\"prvImg\" \n                                            src=\"@/assets/img/placeholder.png\"\n                                            style=\"max-width:100%;border: 3px #c5b7b7 solid;\"\n                                            class=\"\"\n                                            >\n\n                                            <img v-if=\"editImageFlag\"\n                                            id=\"prvImg\" \n                                            :src=\"showImage\"\n                                            style=\"max-width:100%;height:auto;border: 3px #c5b7b7 solid;\"\n                                            class=\"\"\n                                            >\n                                        </div>\n                                        \n                                        <div class=\"upload-options mt-3\">\n                                            <label class=\"upload-options\" for=\"imageUpload\">\n                                                <font-awesome-icon icon=\"fa-solid  fa-upload\"/> Select Logo  Image\n                                                <input \n                                                type=\"file\" \n                                                class=\"image-upload\"\n                                                id=\"imageUpload\" \n                                                accept=\"image/*\" \n                                                @change=\"onFileUpload\"\n                                                >\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <!-- End -->\n\n                            <!-- Link -->\n                            <div class=\"form-group\">\n                                <label for=\"link\">Link</label>\n                                <Field name=\"link\" type=\"text\" v-model=\"link\" class=\"form-control\" autocomplete=\"off\"/>\n                                <ErrorMessage name=\"link\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!-- Order -->\n                            <div class=\"form-group\">\n                                <label for=\"order\">Order</label>\n                                <Field name=\"order\" type=\"number\" v-model=\"order\" class=\"form-control\" autocomplete=\"off\"/>\n                                <ErrorMessage name=\"order\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!-- Status -->\n                            <div class=\"form-group\">\n                                <label for=\"vedioStatus\">Status</label>\n                                <Field name=\"vedioStatus\" as=\"select\" class=\"form-control\" v-model=\"partnerStatus\">\n                                <option value=\"1\">Active</option>\n                                <option value=\"0\">Inactive</option>\n                                </Field>\n                                <ErrorMessage name=\"vedioStatus\" class=\"error-feedback\" />\n                            </div>\n\n                            <div class=\"form-group\">\n                                <button class=\"btn btn-primary mr-2\" :disabled=\"isCreating || isUpdating\">\n                                <span v-show=\"isCreating\" class=\"spinner-border spinner-border-sm\"></span>\n                                Submit\n                                </button>\n                                <button class=\"btn btn-danger ml-2\" @click = \"cancelUpdate\"> <font-awesome-icon icon=\"fa-solid fa-ban\" /> Cancel</button>\n                            </div>\n\n                        </div>\n                    </Form>\n\n                </div>\n\n                <div class=\"col-md-8\">\n                    <table class=\"table table-hover\" id=\"datatable\">\n                        <thead>\n                            <tr>\n                                <th scope=\"col\">SL</th>\n                                <th scope=\"col\">Logo</th>\n                                <th scope=\"col\">Organization Name</th>\n                                <th scope=\"col\">Link</th>\n                                <th scope=\"col\">Status</th>\n                                <th scope=\"col\">Action</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr v-for=\"(partner,index) in partners\" :key=\"partner.id\">\n                                <td scope=\"row\">{{index+1}}</td>\n\n                                <td>\n                                    <img :src=\"backendUrl+'/public/uploads/images/partners/'+partner.logo\" alt=\"image\" style=\"max-width: 50px;height:auto;border: 1px #eeeeee solid;\" class=\"\">\n                                </td>\n\n                                <td class=\"text-bold\"> {{partner.org_name}}</td>\n\n                                <td> <font-awesome-icon icon=\"fa-solid fa-link\" /> <a target=\"_blank\" :href=\"partner.link\" class=\"badge badge-info\"> Go!</a></td>\n                                \n                                <td>\n                                    <span v-if=\"partner.status\" class=\"badge badge-success\"> Active</span>\n                                    <span v-if=\"!partner.status\" class=\"badge badge-danger\"> In-active</span>\n                                </td>\n\n                                <td>\n                                <button class=\"btn btn-warning mx-2 btn-sm\" title=\"Edit partner deatials\"\n                                @click=\"onEdit(partner)\">\n                                <font-awesome-icon icon=\"fa-solid  fa-pencil\" />\n                                </button>\n                                |\n                                <button class=\"btn btn-danger mx-2 btn-sm\" title=\"Delete Partner\" \n                                @click=\"onDelete(partner.id)\">\n                                <font-awesome-icon icon=\"fa-solid fa-trash\" />\n                                </button>\n                            </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n\n\n\n\n\n        </div>\n        </div>\n\n        <!-- Open Model For Image Cooper -->\n            <div class=\"modal fade\" id=\"remarkModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                    <div class=\"modal-content\">\n                                            <div class=\"modal-body p-3\">\n                                                <div class=\"\">\n                                                    <cropper\n                                                        class=\"cropper\"\n                                                        :src=\"img\"\n                                                        :stencil-props=\"{\n                                                        aspectRatio:auto\n                                                        }\"\n                                                        ref=\"refs\"\n                                                        @change=\"changes\"\n                                                    />\n                                                </div>\n                                        </div>\n\n                            <div class=\"modal-footer\">\n                                    <button type=\"button\" class=\"btn btn-info\" data-dismiss=\"modal\"><font-awesome-icon icon=\"fa-solid  fa-ban\" /> Cancel Crop</button>\n                                    <button type=\"button\" class=\"btn btn-danger\" @click=\"cropImage\"> <font-awesome-icon icon=\"fa-solid  fa-crop-simple\" /> Crop</button>\n                            </div>\n                    </div>\n            </div>\n            </div>\n\n\n        <!-- Modal For Print Schedule -->\n            <div class=\"modal fade\" id=\"modalForPrintPartner\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-dialog-centered modal-xl\" role=\"document\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Partners  </h5>\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <div class=\"row\">\n                    <div class=\"col-md-12\">\n                        <div class=\"table-responsive\">\n                                    <table class=\"table table-striped table-bordered\" id=\"datatablePrint\">\n                                    <thead>\n                                        <tr>\n                                        <th scope=\"col\" >SL</th>\n                                        <th scope=\"col\" >Organization Name</th>                           \n                                        <th scope=\"col\" >Link</th> \n                                        <th scope=\"col\" >Order</th> \n                                        <th scope=\"col\" >Status</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        <tr v-for=\"(partner,index) in allPartner\" :key=\"partner.id\">\n                                        <th scope=\"row\">{{index+1}}</th>\n                                        <td >{{partner.org_name}}</td>\n                                        <td >{{partner.link}}</td>\n                                        <td >{{partner.order}}</td>\n                                        <td > {{partner.status == 1 ? 'Active' : 'Inactive'}}</td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n\n                                </div>   \n     \n                    </div> \n                </div>\n\n                    </div>\n                    <div class=\"modal-footer\">\n\n                    </div>\n                </div>\n            </div>\n            </div>\n        <!-- End -->\n    </div>\n</template>\n\n<script>\nimport { createToast } from 'mosha-vue-toastify';\nimport 'mosha-vue-toastify/dist/style.css'\n//import moment from 'moment';\nimport { Form, ErrorMessage,Field } from \"vee-validate\";\nimport { Cropper } from 'vue-advanced-cropper'\nimport 'vue-advanced-cropper/dist/style.css';\nimport * as yup from \"yup\";\nimport \"@hennge/vue3-pagination/dist/vue3-pagination.css\";\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport \"datatables.net-dt/js/dataTables.dataTables\";\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\";\nimport '@/assets/css/custom.css';\nimport $ from 'jquery';\n\nexport default {\n    components: {\n        Form,\n        Field,\n        ErrorMessage,\n        Cropper\n    },\n\n    data() {\n            const validationCreate = yup.object().shape({\n            link: yup\n                .string()\n                .required(\"Link is required!\"),\n            orgName: yup\n                .string()\n                .required(\"Organization name is required!\"),\n            });\n\n        return {\n            editor: ClassicEditor,\n            editorData: '<p>Content of the editor.</p>',\n                editorConfig: {\n                    toolbar: {\n                        items: [\n                          'paragraph',\n                          'heading',\n                          'bold',\n                          'italic',\n                          'link',\n                          'BulletedList',\n                          'NumberedList',\n                          'undo',\n                          'redo',\n                          'aignment'\n                   \n                        ]\n                    }\n            },\n\n            base_url:this.backendUrl,\n\n            vedioForm:validationCreate,\n            partners:{},\n            link:'',\n            order:'',\n            orgName:'',\n            eventId:'',\n            updateId:'',\n\n            partnerStatus:0,\n            image:'',\n            cropData:'',\n            img:'',\n            showImage:'',\n            editImageFlag:false,\n            formAction:'insert',\n            allPartner:{},\n            eventTitle:''\n\n            \n        }\n    },\n\n    methods: {\n        cancelUpdate(){\n           location.reload(); \n        },\n        \n        //Print Partner\n        printPartner(){\n            $(document).ready(function () {\n                $('#modalForPrintPartner').modal('show');\n            });\n            $('#datatablePrint').DataTable().destroy();\n            this.axios\n                .get(this.base_url + \"/api/getPartner\")\n                .then((res) => {\n                this.allPartner = res.data.list;\n                console.log(this.allPartner);\n                $(document).ready(function() {\n                    $('#datatablePrint').DataTable( {\n                        dom: '<\"top\"Bfi>rt<\"top\"lp><\"clear\">', \n                        buttons: [\n                            {\n                                extend: 'csv',\n                                messageTop: 'Partner Informations',\n                                title: 'Asf 2022 Partner Information Table'\n                           },\n                           {\n                                extend: 'print',\n                                messageTop: 'Partner Informations',\n                                title: 'Asf 2022 Partner Information Table'\n                           },\n                        ]\n                    } );\n                    $('.buttons-print').each(function() {\n                    $(this).removeClass('btn-default').addClass('print-button')\n                    })\n\n                    $('.buttons-csv').each(function() {\n                    $(this).removeClass('btn-default').addClass('csv-button')\n                    }) \n\n                    $('.dt-buttons').each(function() { \n                    $(this).css({ float: 'left' });\n                    })\n\n\n                    $('.dataTables_length').each(function() { \n                    $(this).css({ margin: '10px' });\n                    })\n\n                    $('#datatablePrint .dataTables_filter').each(function() { \n                    $(this).css({ float: 'right' });\n                    })\n\n                } );\n            })\n\n        },\n\n        getPartners(){\n            $('#datatable').DataTable().destroy();\n            this.axios\n                .get(this.base_url + \"/api/getPartner\")\n                .then((res) => { \n                    this.partners = res.data.list;\n                    this.eventTitle = res.data.activeEvent.title;\n                    $(document).ready(function () {\n                        $('#datatable').DataTable();\n                    });\n            })\n        },\n\n        onDetails(partner){\n            this.vediosDetailsForModal = partner;\n            $(document).ready(function () {\n                $('#modalForShowDetails').modal('show');\n            });\n\n        },\n\n\n    onFileUpload(e) {\n        let file = e.target.files[0];\n        let reader = new FileReader();\n        this.img = '';\n        if (file[\"size\"] < 10111775) {\n          reader.onloadend = (file) => {\n                console.log(file);\n                this.img = reader.result;\n            };\n            reader.readAsDataURL(file);\n        } else {\n            alert(\"File size can not be bigger than 10 MB\");\n        }\n        \n        $('#remarkModal').modal('show');\n\n    },\n\n    //Croping image(Crop(image) -> Button) =>\n    cropImage(e){\n      console.log(e);\n      let reader = new FileReader();\n      console.log(reader);\n      this.image = this.cropData;\n\n        var pic = this.image;\n\n        $(document).ready(function(){\n        $('#remarkModal').modal('hide');\n        $('#prvImg').attr('src',pic);\n        });\n    },\n\n    //Croping image params\n    changes({ coordinates, canvas }) {\n      console.log(coordinates, canvas);\n      this.cropData = canvas.toDataURL(this.image);\n\t},\n\n    //Insert Data\n    handleVideoInsert(){\n        this.axios\n            .post(this.base_url + '/api/addPartner', {\n                org_name: this.orgName,\n                link: this.link,\n                order: this.order,\n                logo:this.image ? this.image : this.img,\n                status: this.partnerStatus,\n            }).then((res) => { \n                    console.log(res);\n                    setTimeout(createToast('Partner Information Add Successfully !', {\n                            position: 'top-center',\n                            transition: 'bounce',\n                            timeout: 1500,\n                            type: 'success',\n                    }), 10000);\n                    \n                    $(document).ready(function(){\n                    $('#remarkModal').modal('hide');\n                    $('#prvImg').attr('src','@/assets/img/placeholder.png');\n                    });\n\n                    this.$refs.forminsert.resetForm();\n                    this.getPartners();\n                    setTimeout(function(){ location.reload(); }, 1000);\n\n                })\n                .catch((err) => { \n                    console.log(err);\n                })\n    },\n\n    // Update Data\n    handleVideoUpdate(){\n        this.axios\n            .put(this.base_url + '/api/updatePartner/' +this.updateId, {\n                org_name: this.orgName,\n                link: this.link,\n                order:this.order,\n                event_id: this.eventId,\n                logo:this.image ? this.image : this.img,\n                status: this.partnerStatus,\n            }).then((res) => { \n                    console.log(res);\n                    createToast('Partner Information Updated Successfully !', {\n                            position: 'top-center',\n                            transition: 'bounce',\n                            timeout: 1500,\n                            type: 'success',\n                    });\n                    this.$refs.formUpdate.resetForm();\n                    this.formAction = 'insert';\n                    \n                    $(document).ready(function(){\n                    $('#remarkModal').modal('hide');\n                    $('#prvImg').attr('src','@/assets/img/placeholder.png');\n                    });\n                    this.getPartners();\n                    setTimeout(function(){ location.reload(); }, 1000);\n                })\n                .catch((err) => { \n                    console.log(err);\n                })\n\n    },\n    onDelete(id){\n        this.axios\n            .delete(this.base_url+'/api/deletePartner/'+id)\n            .then((result)=>{\n                console.log(result);\n                createToast('Partner Information Deleted Successfully !', {\n                            position: 'top-center',\n                            transition: 'bounce',\n                            timeout: 1500,\n                            type: 'success',\n                    }); \n                    this.getPartners();\n                })\n            .catch((error)=>{\n                console.log(error);\n            })\n    },\n\n    onEdit(partner){\n        this.updateId = partner.id;\n        this.eventId = partner.event_id;\n        this.formAction = 'update';\n        this.editImageFlag = true;\n        this.link = partner.link;\n        this.orgName = partner.org_name;\n        this.eventId = partner.event_id;\n        this.order = partner.order;\n        this.partnerStatus = partner.status;\n        this.showImage = this.base_url + '/public/uploads/images/partners/' +partner.logo;\n    },\n\n    },\n\n    created() {\n        this.getPartners();\n    },\n\n}\n</script>\n\n<style scoped>\n\n\n\n.upload-options label {\n    display: block;\n    align-items: center;\n    font-weight: 400;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    cursor: pointer;\n    overflow: hidden;\n    padding: 10px;\n    text-align: center;\n    background: #007dac;\n    color: white;\n    margin: 0;\n}\n\n.upload-options label:hover {\n    background-color: #0a466e;\n}\n\n.upload-options input {\n    width: 0.1px;\n    height: 0.1px;\n    opacity: 0;\n    overflow: hidden;\n    position: absolute;\n    z-index: -1;\n}\n\n.speaker-image {\n    width: 70px;\n}\n\n/* .img-thumbnail {\n    max-width: 20% !important;\n} */\n\n.modal-body-mod {\n    padding: 0px !important;\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}