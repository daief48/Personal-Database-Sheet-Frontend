{"ast":null,"code":"import { createToast } from 'mosha-vue-toastify';\nimport 'mosha-vue-toastify/dist/style.css';\nimport { Form, ErrorMessage, Field } from \"vee-validate\";\nimport { Cropper } from 'vue-advanced-cropper';\nimport 'vue-advanced-cropper/dist/style.css';\nimport * as yup from \"yup\";\nimport \"@hennge/vue3-pagination/dist/vue3-pagination.css\";\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport \"datatables.net-dt/js/dataTables.dataTables\";\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\";\nimport '../../assets/css/custom.css';\nimport $ from 'jquery';\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n    Cropper\n  },\n\n  data() {\n    const validationCreate = yup.object().shape({\n      albumType: yup.string().required(\"Album type is required!\"),\n      title: yup.string().required(\"Title is required!\")\n    });\n    return {\n      editor: ClassicEditor,\n      editorData: '<p>Content of the editor.</p>',\n      editorConfig: {\n        toolbar: {\n          items: ['paragraph', 'heading', 'bold', 'italic', 'link', 'BulletedList', 'NumberedList', 'undo', 'redo', 'aignment']\n        }\n      },\n      base_url: this.backendUrl,\n      vedioForm: validationCreate,\n      albums: {},\n      link: '',\n      order: '',\n      albumType: '',\n      eventId: '',\n      updateId: '',\n      title: '',\n      albumStatus: 0,\n      image: '',\n      cropData: '',\n      img: '',\n      showImage: '',\n      editImageFlag: false,\n      formAction: 'insert',\n      allAlbum: {},\n      eventTitle: ''\n    };\n  },\n\n  methods: {\n    cancelUpdate() {\n      location.reload();\n    },\n\n    //Print Partner\n    printAlbum() {\n      $(document).ready(function () {\n        $('#modalForPrintPartner').modal('show');\n      });\n      $('#datatablePrint').DataTable().destroy();\n      this.axios.get(this.base_url + \"/api/albums\").then(res => {\n        this.allAlbum = res.data.list;\n        $(document).ready(function () {\n          $('#datatablePrint').DataTable({\n            dom: '<\"top\"Bfi>rt<\"top\"lp><\"clear\">',\n            buttons: [{\n              extend: 'csv',\n              messageTop: 'Album Informations',\n              title: 'Asf 2022 Album Information Table'\n            }, {\n              extend: 'print',\n              messageTop: 'Album Informations',\n              title: 'Asf 2022 Album Information Table'\n            }]\n          });\n          $('.buttons-print').each(function () {\n            $(this).removeClass('btn-default').addClass('print-button');\n          });\n          $('.buttons-csv').each(function () {\n            $(this).removeClass('btn-default').addClass('csv-button');\n          });\n          $('.dt-buttons').each(function () {\n            $(this).css({\n              float: 'left'\n            });\n          });\n          $('.dataTables_length').each(function () {\n            $(this).css({\n              margin: '10px'\n            });\n          });\n          $('#datatablePrint .dataTables_filter').each(function () {\n            $(this).css({\n              float: 'right'\n            });\n          });\n        });\n      });\n    },\n\n    // Get All Albums\n    getAlbums() {\n      $('#datatable').DataTable().destroy();\n      this.axios.get(this.base_url + \"/api/albums\").then(res => {\n        this.albums = res.data.list;\n        this.eventTitle = res.data.activeEvent.title;\n        $(document).ready(function () {\n          $('#datatable').DataTable();\n        });\n      });\n    },\n\n    onFileUpload(e) {\n      let file = e.target.files[0];\n      let reader = new FileReader();\n      this.img = '';\n\n      if (file[\"size\"] < 10111775) {\n        reader.onloadend = file => {\n          console.log(file);\n          this.img = reader.result;\n        };\n\n        reader.readAsDataURL(file);\n      } else {\n        alert(\"File size can not be bigger than 10 MB\");\n      }\n\n      $('#remarkModal').modal('show');\n    },\n\n    //Croping image(Crop(image) -> Button) =>\n    cropImage(e) {\n      console.log(e);\n      let reader = new FileReader();\n      console.log(reader);\n      this.image = this.cropData;\n      var pic = this.image;\n      $(document).ready(function () {\n        $('#remarkModal').modal('hide');\n        $('#prvImg').attr('src', pic);\n      });\n    },\n\n    //Croping image params\n    changes({\n      coordinates,\n      canvas\n    }) {\n      console.log(coordinates, canvas);\n      this.cropData = canvas.toDataURL(this.image);\n    },\n\n    //Insert Data\n    handleAlbumInsert() {\n      this.axios.post(this.base_url + '/api/add_album', {\n        album_type: this.albumType,\n        title: this.title,\n        order: this.order,\n        thumbnail: this.image ? this.image : this.img,\n        status: this.albumStatus\n      }).then(res => {\n        console.log(res);\n        setTimeout(createToast('Album Information Add Successfully !', {\n          position: 'top-center',\n          transition: 'bounce',\n          timeout: 1500,\n          type: 'success'\n        }), 10000);\n        $(document).ready(function () {\n          $('#remarkModal').modal('hide');\n          $('#prvImg').attr('src', '@/assets/img/placeholder.png');\n        });\n        this.$refs.forminsert.resetForm();\n        this.getAlbums();\n        setTimeout(function () {\n          location.reload();\n        }, 1000);\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n\n    // Update Data\n    handleAlbumUpdate() {\n      this.axios.put(this.base_url + '/api/update_album/' + this.updateId, {\n        album_type: this.albumType,\n        title: this.title,\n        order: this.order,\n        thumbnail: this.image ? this.image : this.img,\n        status: this.albumStatus,\n        event_id: this.eventId\n      }).then(res => {\n        console.log(res);\n        createToast('Album Information Updated Successfully !', {\n          position: 'top-center',\n          transition: 'bounce',\n          timeout: 1500,\n          type: 'success'\n        });\n        this.$refs.formUpdate.resetForm();\n        this.formAction = 'insert';\n        $(document).ready(function () {\n          $('#remarkModal').modal('hide');\n          $('#prvImg').attr('src', '@/assets/img/placeholder.png');\n        });\n        this.getAlbums();\n        setTimeout(function () {\n          location.reload();\n        }, 1000);\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n\n    onDelete(id) {\n      this.axios.delete(this.base_url + '/api/delete_album/' + id).then(result => {\n        console.log(result);\n        createToast('Album Information Deleted Successfully !', {\n          position: 'top-center',\n          transition: 'bounce',\n          timeout: 1500,\n          type: 'success'\n        });\n        this.getAlbums();\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    onEdit(album) {\n      this.updateId = album.id;\n      this.eventId = album.event_id;\n      this.formAction = 'update';\n      this.editImageFlag = true;\n      this.title = album.title;\n      this.albumType = album.album_type;\n      this.order = album.order;\n      this.albumStatus = album.status;\n      this.showImage = this.base_url + '/public/uploads/images/album_thumbnail/' + album.thumbnail;\n    }\n\n  },\n\n  created() {\n    this.getAlbums();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["createToast","Form","ErrorMessage","Field","Cropper","yup","ClassicEditor","$","components","data","validationCreate","object","shape","albumType","string","required","title","editor","editorData","editorConfig","toolbar","items","base_url","backendUrl","vedioForm","albums","link","order","eventId","updateId","albumStatus","image","cropData","img","showImage","editImageFlag","formAction","allAlbum","eventTitle","methods","cancelUpdate","location","reload","printAlbum","document","ready","modal","DataTable","destroy","axios","get","then","res","list","dom","buttons","extend","messageTop","each","removeClass","addClass","css","float","margin","getAlbums","activeEvent","onFileUpload","e","file","target","files","reader","FileReader","onloadend","console","log","result","readAsDataURL","alert","cropImage","pic","attr","changes","coordinates","canvas","toDataURL","handleAlbumInsert","post","album_type","thumbnail","status","setTimeout","position","transition","timeout","type","$refs","forminsert","resetForm","catch","err","handleAlbumUpdate","put","event_id","formUpdate","onDelete","id","delete","error","onEdit","album","created"],"sourceRoot":"","sources":["/var/www/html/PMS_PROJECT/asf-admin/src/components/Album/Album.vue"],"sourcesContent":["<template>\n    <div>\n        <h4 class=\"text-bold heading-style\">Albums </h4>\n\n        <div class=\"card card-default\">\n            <div class=\"card-header\">\n\n\n        <button class=\"btn btn-success print-button-style\" style=\"padding:5px 6px\" @click=\"printAlbum\">\n                <font-awesome-icon icon=\"fa-solid  fa-rectangle-list\" />\n                Export\n        </button>\n            </div>\n\n        <div class=\"card-body\">\n            <div class=\"row\">\n\n                <div class=\"col-md-4 form-bg rounded\" style=\"border: 1px #eeeeee solid;\">\n\n                    <!-- Insert Album Information -->\n                    <Form v-if=\"formAction == 'insert'\" @submit=\"handleAlbumInsert\" :validation-schema=\"vedioForm\" ref=\"forminsert\">\n\n                        <div>\n                            <div class=\"row mb-3 mt-2\">\n                                <div class=\"col-md-12\">\n                                    <div class=\"input-group border border-dark rounded\">\n                                        <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text p4 input-group-text-label\" >Event Title </span>\n                                        </div>\n                                        <label class=\"ml-3 mt-2 \">{{eventTitle}}</label>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <!-- Album Type -->\n                            <div class=\"form-group\">\n                                <label for=\"albumType\">Album Type*</label>\n                                <Field name=\"albumType\" as=\"select\" class=\"form-control\" v-model=\"albumType\">\n                                <option value=\"\">-- Album Type --</option>\n                                <option value=\"Image\">Image</option>\n                                <option value=\"Video\">Video</option>\n                                </Field>\n                                <ErrorMessage name=\"albumType\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!--  Image -->\n                            <div class=\"form-group\">\n                                <div class=\"form-bg text-center p-3\">\n                                    <div class=\" box\" style=\"display:block\">\n                                        <div class=\"js--image-preview\" style=\"text-align:center\">\n                                            <img v-if=\"!editImageFlag\"\n                                            id=\"prvImg\" \n                                            src=\"@/assets/img/placeholder.png\"\n                                            style=\"max-width:100%;border: 3px #c5b7b7 solid;\"\n                                            class=\"\"\n                                            >\n\n                                            <img v-if=\"editImageFlag\"\n                                            id=\"prvImg\" \n                                            :src=\"showImage\"\n                                            style=\"max-width:100%; height:auto;border: 3px #c5b7b7 solid;\"\n                                            class=\"\"\n                                            >\n                                        </div>\n                                        \n                                        <div class=\"upload-options mt-3\">\n                                            <label class=\"upload-options\" for=\"imageUpload\">\n                                                <font-awesome-icon icon=\"fa-solid  fa-upload\"/> Select Thumbnail  Image\n                                                <input \n                                                type=\"file\" \n                                                class=\"image-upload\"\n                                                id=\"imageUpload\" \n                                                accept=\"image/*\" \n                                                @change=\"onFileUpload\"\n                                                >\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <!-- End -->\n\n                            <!-- Album Title -->\n                            <div class=\"form-group\">\n                                <label for=\"title\">Title*</label>\n                                <Field name=\"title\" type=\"text\" v-model=\"title\" class=\"form-control\" autocomplete=\"off\"/>\n                                <ErrorMessage name=\"title\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!-- Order -->\n                            <div class=\"form-group\">\n                                <label for=\"order\">Order</label>\n                                <Field name=\"order\" type=\"number\" v-model=\"order\" class=\"form-control\" autocomplete=\"off\"/>\n                                <ErrorMessage name=\"order\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!-- Status -->\n                            <div class=\"form-group\">\n                                <label for=\"vedioStatus\">Status</label>\n                                <Field name=\"vedioStatus\" as=\"select\" class=\"form-control\" v-model=\"albumStatus\">\n                                \n                                <option value=\"1\">Active</option>\n                                <option value=\"0\">Inactive</option>\n                                </Field>\n                                <ErrorMessage name=\"vedioStatus\" class=\"error-feedback\" />\n                            </div>\n\n                            <div class=\"form-group\">\n                                <button class=\"btn btn-primary mr-2\" :disabled=\"isCreating || isUpdating\">\n                                <span v-show=\"isCreating\" class=\"spinner-border spinner-border-sm\"></span>\n                                Submit\n                                </button>\n                                <button class=\"btn btn-danger ml-2\" type=\"reset\">Reset</button>\n                            </div>\n\n                        </div>\n                    </Form>\n                    <!-- Insert Album Information End -->\n\n                    <!-- Update Album Information -->\n                    <Form v-if=\"formAction == 'update'\" @submit=\"handleAlbumUpdate\" :validation-schema=\"vedioForm\" ref=\"formUpdate\">\n                        <div>\n\n                            <div class=\"row mb-3 mt-2\">\n                                <div class=\"col-md-12\">\n                                    <div class=\"input-group border border-dark rounded\">\n                                        <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text p4 input-group-text-label\" >Event Title </span>\n                                        </div>\n                                        <label class=\"ml-3 mt-2 \">{{eventTitle}}</label>\n                                    </div>\n                                </div>\n                            </div>\n\n                             <!-- Album Type -->\n                             <div class=\"form-group\">\n                                <label for=\"albumType\">Album Type*</label>\n                                <Field name=\"albumType\" as=\"select\" class=\"form-control\" v-model=\"albumType\">\n                                <option value=\"\">-- Album Type --</option>\n                                <option value=\"Image\">Image</option>\n                                <option value=\"Video\">Video</option>\n                                </Field>\n                                <ErrorMessage name=\"albumType\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!--  Image -->\n                            <div class=\"form-group\">\n                                <div class=\"form-bg text-center p-3\">\n                                    <div class=\" box\" style=\"display:block\">\n                                        <div class=\"js--image-preview\" style=\"text-align:center\">\n                                            <img v-if=\"!editImageFlag\"\n                                            id=\"prvImg\" \n                                            src=\"@/assets/img/placeholder.png\"\n                                            style=\"max-width:100%;border: 3px #c5b7b7 solid;\"\n                                            class=\"\"\n                                            >\n\n                                            <img v-if=\"editImageFlag\"\n                                            id=\"prvImg\" \n                                            :src=\"showImage\"\n                                            style=\"max-width:100%;height:auto;border: 3px #c5b7b7 solid;\"\n                                            class=\"\"\n                                            >\n                                        </div>\n                                        \n                                        <div class=\"upload-options mt-3\">\n                                            <label class=\"upload-options\" for=\"imageUpload\">\n                                                <font-awesome-icon icon=\"fa-solid  fa-upload\"/> Select Thumbnail  Image\n                                                <input \n                                                type=\"file\" \n                                                class=\"image-upload\"\n                                                id=\"imageUpload\" \n                                                accept=\"image/*\" \n                                                @change=\"onFileUpload\"\n                                                >\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <!-- End -->\n\n                            <!-- Title -->\n                            <div class=\"form-group\">\n                                <label for=\"title\">Title</label>\n                                <Field name=\"title\" type=\"text\" v-model=\"title\" class=\"form-control\" autocomplete=\"off\"/>\n                                <ErrorMessage name=\"title\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!-- Order -->\n                            <div class=\"form-group\">\n                                <label for=\"order\">Order</label>\n                                <Field name=\"order\" type=\"number\" v-model=\"order\" class=\"form-control\" autocomplete=\"off\"/>\n                                <ErrorMessage name=\"order\" class=\"error-feedback\" />\n                            </div>\n                            <!-- End -->\n\n                            <!-- Status -->\n                            <div class=\"form-group\">\n                                <label for=\"vedioStatus\">Status*</label>\n                                <Field name=\"vedioStatus\" as=\"select\" class=\"form-control\" v-model=\"albumStatus\">\n                                <option value=\"1\">Active</option>\n                                <option value=\"0\">Inactive</option>\n                                </Field>\n                                <ErrorMessage name=\"vedioStatus\" class=\"error-feedback\" />\n                            </div>\n\n                            <div class=\"form-group\">\n                                <button class=\"btn btn-primary mr-2\" :disabled=\"isCreating || isUpdating\">\n                                <span v-show=\"isCreating\" class=\"spinner-border spinner-border-sm\"></span>\n                                Submit\n                                </button>\n                                <!-- <button class=\"btn btn-danger ml-2\" type=\"reset\">Reset</button> -->\n                                <button class=\"btn btn-danger ml-2\" @click = \"cancelUpdate\"> <font-awesome-icon icon=\"fa-solid fa-ban\" /> Cancel</button>\n                            </div>\n\n                        </div>\n                    </Form>\n                    <!-- Update Album Information End -->\n\n                </div>\n\n                <!-- Table -->\n                <div class=\"col-md-8\">\n                    <table class=\"table table-hover\" id=\"datatable\">\n                        <thead>\n                            <tr>\n                                <th scope=\"col\">SL</th>\n                                <th scope=\"col\">Thumbnail</th>\n                                <th scope=\"col\">Album Type</th>\n                                <th scope=\"col\">Title</th>\n                                <th scope=\"col\">Order</th>\n                                <th scope=\"col\">Status</th>\n                                <th scope=\"col\">Action</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr v-for=\"(album,index) in albums\" :key=\"album.id\">\n                                <td scope=\"row\">{{index+1}}</td>\n\n                                <td>\n                                    <img :src=\"backendUrl+'/public/uploads/images/album_thumbnail/'+album.thumbnail\" alt=\"image\" style=\"max-width: 50px;height:auto;border: 1px #eeeeee solid;\" class=\"\">\n                                </td>\n\n                                <td class=\"text-bold\"> {{album.album_type}}</td>\n\n                                <td> {{album.title}}</td>\n                                <td><span  class=\"badge rounded-pill bg-dark\"> {{album.order}}</span></td>\n                                <td>\n                                    <span v-if=\"album.status\" class=\"badge badge-success\"> Active</span>\n                                    <span v-if=\"!album.status\" class=\"badge badge-danger\"> In-active</span>\n                                </td>\n\n                                <td>\n                                <button class=\"btn btn-warning mx-2 btn-sm\" title=\"Edit Album Details\"\n                                @click=\"onEdit(album)\">\n                                <font-awesome-icon icon=\"fa-solid  fa-pencil\" />\n                                </button>\n                                |\n                                <button class=\"btn btn-danger mx-2 btn-sm\" title=\"Delete Album\" \n                                @click=\"onDelete(album.id)\">\n                                <font-awesome-icon icon=\"fa-solid fa-trash\" />\n                                </button>\n                            </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <!-- End -->\n            </div>\n        </div>\n        </div>\n\n        <!-- Open Model For Image Cooper -->\n            <div class=\"modal fade\" id=\"remarkModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                    <div class=\"modal-content\">\n                                            <div class=\"modal-body p-3\">\n                                                <div class=\"\">\n                                                    <cropper\n                                                        class=\"cropper\"\n                                                        :src=\"img\"\n                                                        :stencil-props=\"{\n                                                        aspectRatio:auto\n                                                        }\"\n                                                        ref=\"refs\"\n                                                        @change=\"changes\"\n                                                    />\n                                                </div>\n                                        </div>\n\n                            <div class=\"modal-footer\">\n                                    <button type=\"button\" class=\"btn btn-info\" data-dismiss=\"modal\"><font-awesome-icon icon=\"fa-solid  fa-ban\" /> Cancel Crop</button>\n                                    <button type=\"button\" class=\"btn btn-danger\" @click=\"cropImage\"> <font-awesome-icon icon=\"fa-solid  fa-crop-simple\" /> Crop</button>\n                            </div>\n                    </div>\n            </div>\n            </div>\n        <!--Image Cooper End -->\n\n        <!-- Modal For Print Schedule -->\n            <div class=\"modal fade\" id=\"modalForPrintPartner\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-dialog-centered modal-xl\" role=\"document\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Album  </h5>\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <div class=\"row\">\n                    <div class=\"col-md-12\">\n                        <div class=\"table-responsive\">\n                                    <table class=\"table table-striped table-bordered\" id=\"datatablePrint\">\n                                    <thead>\n                                        <tr>\n                                        <th scope=\"col\" >SL</th>\n                                        <th scope=\"col\" >Album Type</th>                           \n                                        <th scope=\"col\" >Title</th> \n                                        <th scope=\"col\" >Order</th> \n                                        <th scope=\"col\" >Status</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        <tr v-for=\"(album,index) in allAlbum\" :key=\"album.id\">\n                                        <th scope=\"row\">{{index+1}}</th>\n                                        <td >{{album.album_type}}</td>\n                                        <td >{{album.title}}</td>\n                                        <td >{{album.order}}</td>\n                                        <td > {{album.status == 1 ? 'Active' : 'Inactive'}}</td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n\n                                </div>   \n     \n                    </div> \n                </div>\n\n                    </div>\n                    <div class=\"modal-footer\">\n\n                    </div>\n                </div>\n            </div>\n            </div>\n        <!-- End -->\n    </div>\n</template>\n\n<script>\n\nimport { createToast } from 'mosha-vue-toastify';\nimport 'mosha-vue-toastify/dist/style.css'\nimport { Form, ErrorMessage,Field } from \"vee-validate\";\nimport { Cropper } from 'vue-advanced-cropper'\nimport 'vue-advanced-cropper/dist/style.css';\nimport * as yup from \"yup\";\nimport \"@hennge/vue3-pagination/dist/vue3-pagination.css\";\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport \"datatables.net-dt/js/dataTables.dataTables\";\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\";\nimport '../../assets/css/custom.css';\nimport $ from 'jquery';\n\nexport default {\n    components: {\n        Form,\n        Field,\n        ErrorMessage,\n        Cropper\n    },\n\n    data() {\n            const validationCreate = yup.object().shape({\n            albumType: yup\n                .string()\n                .required(\"Album type is required!\"),\n            title: yup\n                .string()\n                .required(\"Title is required!\"),\n            });\n\n        return {\n            editor: ClassicEditor,\n            editorData: '<p>Content of the editor.</p>',\n                editorConfig: {\n                    toolbar: {\n                        items: [\n                          'paragraph',\n                          'heading',\n                          'bold',\n                          'italic',\n                          'link',\n                          'BulletedList',\n                          'NumberedList',\n                          'undo',\n                          'redo',\n                          'aignment'\n                   \n                        ]\n                    }\n            },\n\n            base_url:this.backendUrl,\n\n            vedioForm:validationCreate,\n            albums:{},\n            link:'',\n            order:'',\n            albumType:'',\n            eventId:'',\n            updateId:'',\n            title:'',\n            albumStatus:0,\n            image:'',\n            cropData:'',\n            img:'',\n            showImage:'',\n            editImageFlag:false,\n            formAction:'insert',\n            allAlbum:{},\n            eventTitle:''\n\n            \n        }\n    },\n\n    methods: {\n        cancelUpdate(){\n           location.reload(); \n        },\n        \n        //Print Partner\n        printAlbum(){\n            $(document).ready(function () {\n                $('#modalForPrintPartner').modal('show');\n            });\n            $('#datatablePrint').DataTable().destroy();\n            this.axios\n                .get(this.base_url + \"/api/albums\")\n                .then((res) => {\n                this.allAlbum = res.data.list;\n                $(document).ready(function() {\n                    $('#datatablePrint').DataTable( {\n                        dom: '<\"top\"Bfi>rt<\"top\"lp><\"clear\">', \n                        buttons: [\n                            {\n                                extend: 'csv',\n                                messageTop: 'Album Informations',\n                                title: 'Asf 2022 Album Information Table'\n                           },\n                           {\n                                extend: 'print',\n                                messageTop: 'Album Informations',\n                                title: 'Asf 2022 Album Information Table'\n                           },\n                        ]\n                    } );\n                    $('.buttons-print').each(function() {\n                    $(this).removeClass('btn-default').addClass('print-button')\n                    })\n\n                    $('.buttons-csv').each(function() {\n                    $(this).removeClass('btn-default').addClass('csv-button')\n                    }) \n\n                    $('.dt-buttons').each(function() { \n                    $(this).css({ float: 'left' });\n                    })\n\n\n                    $('.dataTables_length').each(function() { \n                    $(this).css({ margin: '10px' });\n                    })\n\n                    $('#datatablePrint .dataTables_filter').each(function() { \n                    $(this).css({ float: 'right' });\n                    })\n\n                } );\n            })\n\n        },\n\n        // Get All Albums\n        getAlbums(){\n            $('#datatable').DataTable().destroy();\n            this.axios\n                .get(this.base_url + \"/api/albums\")\n                .then((res) => { \n                    this.albums = res.data.list;\n                    this.eventTitle = res.data.activeEvent.title;\n                    $(document).ready(function () {\n                        $('#datatable').DataTable();\n                    });\n            })\n        },\n\n        onFileUpload(e) {\n            let file = e.target.files[0];\n            let reader = new FileReader();\n            this.img = '';\n            if (file[\"size\"] < 10111775) {\n            reader.onloadend = (file) => {\n                    console.log(file);\n                    this.img = reader.result;\n                };\n                reader.readAsDataURL(file);\n            } else {\n                alert(\"File size can not be bigger than 10 MB\");\n            }\n            \n            $('#remarkModal').modal('show');\n\n        },\n\n        //Croping image(Crop(image) -> Button) =>\n        cropImage(e){\n        console.log(e);\n        let reader = new FileReader();\n        console.log(reader);\n        this.image = this.cropData;\n\n            var pic = this.image;\n\n            $(document).ready(function(){\n            $('#remarkModal').modal('hide');\n            $('#prvImg').attr('src',pic);\n            });\n        },\n\n        //Croping image params\n        changes({ coordinates, canvas }) {\n        console.log(coordinates, canvas);\n        this.cropData = canvas.toDataURL(this.image);\n        },\n\n    //Insert Data\n    handleAlbumInsert(){\n        this.axios\n            .post(this.base_url + '/api/add_album', {\n                album_type: this.albumType,\n                title: this.title,\n                order:this.order,\n                thumbnail:this.image ? this.image : this.img,\n                status: this.albumStatus,\n            }).then((res) => { \n                    console.log(res);\n                    setTimeout(createToast('Album Information Add Successfully !', {\n                            position: 'top-center',\n                            transition: 'bounce',\n                            timeout: 1500,\n                            type: 'success',\n                    }), 10000);\n                    \n                    $(document).ready(function(){\n                    $('#remarkModal').modal('hide');\n                    $('#prvImg').attr('src','@/assets/img/placeholder.png');\n                    });\n\n                    this.$refs.forminsert.resetForm();\n                    this.getAlbums();\n                    setTimeout(function(){ location.reload(); }, 1000);\n\n                })\n                .catch((err) => { \n                    console.log(err);\n                })\n    },\n\n    // Update Data\n    handleAlbumUpdate(){\n        this.axios\n            .put(this.base_url + '/api/update_album/' +this.updateId, {\n                album_type: this.albumType,\n                title: this.title,\n                order:this.order,\n                thumbnail:this.image ? this.image : this.img,\n                status: this.albumStatus,\n                event_id: this.eventId,\n            }).then((res) => { \n                    console.log(res);\n                    createToast('Album Information Updated Successfully !', {\n                            position: 'top-center',\n                            transition: 'bounce',\n                            timeout: 1500,\n                            type: 'success',\n                    });\n                    this.$refs.formUpdate.resetForm();\n                    this.formAction = 'insert';\n                    \n                    $(document).ready(function(){\n                    $('#remarkModal').modal('hide');\n                    $('#prvImg').attr('src','@/assets/img/placeholder.png');\n                    });\n                    this.getAlbums();\n                    setTimeout(function(){ location.reload(); }, 1000);\n                })\n                .catch((err) => { \n                    console.log(err);\n                })\n\n    },\n    onDelete(id){\n        this.axios\n            .delete(this.base_url+'/api/delete_album/'+id)\n            .then((result)=>{\n                console.log(result);\n                createToast('Album Information Deleted Successfully !', {\n                            position: 'top-center',\n                            transition: 'bounce',\n                            timeout: 1500,\n                            type: 'success',\n                    }); \n                    this.getAlbums();\n                })\n            .catch((error)=>{\n                console.log(error);\n            })\n    },\n\n    onEdit(album){\n        this.updateId = album.id;\n        this.eventId = album.event_id;\n        this.formAction = 'update';\n        this.editImageFlag = true;\n        this.title = album.title;\n        this.albumType = album.album_type;\n        this.order = album.order;\n        this.albumStatus = album.status;\n        this.showImage = this.base_url + '/public/uploads/images/album_thumbnail/' +album.thumbnail;\n    },\n\n    },\n\n    created() {\n        this.getAlbums();\n    },\n\n}\n</script>\n\n<style scoped>\n\n\n\n.upload-options label {\n    display: block;\n    align-items: center;\n    font-weight: 400;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    cursor: pointer;\n    overflow: hidden;\n    padding: 10px;\n    text-align: center;\n    background: #007dac;\n    color: white;\n    margin: 0;\n}\n\n.upload-options label:hover {\n    background-color: #0a466e;\n}\n\n.upload-options input {\n    width: 0.1px;\n    height: 0.1px;\n    opacity: 0;\n    overflow: hidden;\n    position: absolute;\n    z-index: -1;\n}\n\n.speaker-image {\n    width: 70px;\n}\n\n.modal-body-mod {\n    padding: 0px !important;\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}