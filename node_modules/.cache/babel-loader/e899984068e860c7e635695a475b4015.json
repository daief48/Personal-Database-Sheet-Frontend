{"ast":null,"code":"//import axios from \"axios\";\nimport 'jquery/dist/jquery.min.js';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useStore, mapGetters } from \"vuex\";\nexport default {\n  components: {},\n\n  data() {\n    const store = useStore();\n    return {\n      url: this.backendUrl,\n      phone: '',\n      password: '',\n      updateStatus: 0,\n      saveStatus: 1,\n      // phone                                                          \n      errorphone: 0,\n      phonemessage: '',\n      // password                                                          \n      errorPassword: 0,\n      Passwordmessage: '',\n      invalidphonePassword: 0,\n      loader: false,\n      reqDwn: {},\n      store\n    };\n  },\n\n  computed: { ...mapGetters([\"otpUserId\", \"otp\"])\n  },\n  methods: {\n    onSubmit() {\n      if (this.phone !== '' && this.password !== '') {\n        this.axios.post(this.url + '/api/auth/otpVerify', {\n          phone: this.phone,\n          password: this.password\n        }).then(result => {\n          console.log(result);\n          this.invalidphonePassword = '';\n          var userData = result.data.user;\n          userData.access_token = result.data.authorisation.token;\n          userData.token_type = result.data.authorisation.type;\n          localStorage.setItem('user', JSON.stringify(userData));\n\n          if (userData.role_id == 1) {\n            this.$router.push({\n              path: '/dashboard'\n            });\n          }\n\n          if (userData.role_id == 2) {\n            this.$router.push({\n              path: '/profile'\n            });\n          }\n        }).catch(error => {\n          this.errorphone = 0;\n          this.errorPassword = 0;\n          this.invalidphonePassword = 1;\n          console.log(error.response.data.errors);\n        });\n      } else {\n        if (this.phone === '') {\n          this.errorphone = 1;\n        } else {\n          this.errorphone = 0;\n        }\n\n        if (this.password === '') {\n          this.errorPassword = 1;\n        } else {\n          this.errorPassword = 0;\n        }\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAwCA;AAEA,OAAO,2BAAP;AACA,OAAO,sCAAP;AACA,SAAQA,QAAR,EAAkBC,UAAlB,QAAoC,MAApC;AACA,eAAe;EACdC,UAAU,EAAC,EADG;;EAIdC,IAAI,GAAG;IACN,MAAMC,KAAI,GAAIJ,QAAQ,EAAtB;IACA,OAAO;MACNK,GAAE,EAAI,KAAKC,UADL;MAENC,KAAK,EAAE,EAFD;MAGNC,QAAQ,EAAE,EAHJ;MAKNC,YAAY,EAAE,CALR;MAMNC,UAAU,EAAE,CANN;MAON;MACAC,UAAU,EAAC,CARL;MASNC,YAAY,EAAE,EATR;MAWN;MACAC,aAAa,EAAC,CAZR;MAaNC,eAAe,EAAE,EAbX;MAcNC,oBAAoB,EAAC,CAdf;MAeNC,MAAM,EAAE,KAfF;MAgBNC,MAAM,EAAC,EAhBD;MAiBNb;IAjBM,CAAP;EAmBE,CAzBW;;EA2Bdc,QAAQ,EAAE,EACP,GAAGjB,UAAU,CAAC,CAAC,WAAD,EAAa,KAAb,CAAD;EADN,CA3BI;EA+BZkB,OAAO,EAAE;IACRC,QAAQ,GAAG;MACZ,IAAG,KAAKb,KAAL,KAAe,EAAf,IAAqB,KAAKC,QAAL,KAAkB,EAA1C,EAA6C;QAC5C,KAAKa,KAAL,CACEC,IADF,CACO,KAAKjB,GAAL,GAAS,qBADhB,EACsC;UACrCE,KAAK,EAAE,KAAKA,KADyB;UAErCC,QAAQ,EAAE,KAAKA;QAFsB,CADtC,EAMEe,IANF,CAMQC,MAAD,IAAY;UACjBC,OAAO,CAACC,GAAR,CAAYF,MAAZ;UACA,KAAKT,oBAAL,GAA0B,EAA1B;UACA,IAAIY,QAAO,GAAIH,MAAM,CAACrB,IAAP,CAAYyB,IAA3B;UACAD,QAAQ,CAACE,YAAT,GAAwBL,MAAM,CAACrB,IAAP,CAAY2B,aAAZ,CAA0BC,KAAlD;UACAJ,QAAQ,CAACK,UAAT,GAAsBR,MAAM,CAACrB,IAAP,CAAY2B,aAAZ,CAA0BG,IAAhD;UACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeV,QAAf,CAA7B;;UACA,IAAGA,QAAQ,CAACW,OAAT,IAAoB,CAAvB,EAAyB;YACxB,KAAKC,OAAL,CAAaC,IAAb,CAAkB;cAAEC,IAAI,EAAC;YAAP,CAAlB;UACD;;UACA,IAAGd,QAAQ,CAACW,OAAT,IAAoB,CAAvB,EAAyB;YACxB,KAAKC,OAAL,CAAaC,IAAb,CAAkB;cAAEC,IAAI,EAAC;YAAP,CAAlB;UACD;QACA,CAnBF,EAmBIC,KAnBJ,CAmBWC,KAAD,IAAS;UACjB,KAAKhC,UAAL,GAAkB,CAAlB;UACA,KAAKE,aAAL,GAAqB,CAArB;UACA,KAAKE,oBAAL,GAA4B,CAA5B;UACAU,OAAO,CAACC,GAAR,CAAYiB,KAAK,CAACC,QAAN,CAAezC,IAAf,CAAoB0C,MAAhC;QACA,CAxBF;MAyBA,CA1BD,MA0BK;QACJ,IAAI,KAAKtC,KAAL,KAAe,EAAnB,EAAuB;UACtB,KAAKI,UAAL,GAAkB,CAAlB;QACD,CAFA,MAGK;UACJ,KAAKA,UAAL,GAAkB,CAAlB;QACD;;QAEA,IAAI,KAAKH,QAAL,KAAkB,EAAtB,EAA0B;UACzB,KAAKK,aAAL,GAAqB,CAArB;QACD,CAFA,MAEO;UACN,KAAKA,aAAL,GAAqB,CAArB;QACD;MAED;IACC;;EA3CQ;AA/BG,CAAf","names":["useStore","mapGetters","components","data","store","url","backendUrl","phone","password","updateStatus","saveStatus","errorphone","phonemessage","errorPassword","Passwordmessage","invalidphonePassword","loader","reqDwn","computed","methods","onSubmit","axios","post","then","result","console","log","userData","user","access_token","authorisation","token","token_type","type","localStorage","setItem","JSON","stringify","role_id","$router","push","path","catch","error","response","errors"],"sourceRoot":"","sources":["/var/www/html/PMS_PROJECT/pds/src/components/VerifyOtp.vue"],"sourcesContent":["<template>\r\n\t\t<div class=\"container h-100\">\r\n\t\t\t<div class=\"s-header\">\r\n\t\t\t\t<div class=\"d-flex justify-content-center text-center\">\r\n\t\t\t\t\t<img width=\"45\" src=\"@/assets/img/govt_logo.png\"> <h3 class=\"m-0 p-1\">Department of Youth Development</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"\">\r\n\t\t\t\t<div class=\"user_card mt-5\">\r\n\t\t\t\t\t<div class=\"justify-content-center text-center\">\r\n\t\t\t\t\t\t<h2 class=\"mt-5\" style=\"color:#2D76B7\">Verify OTP Number {{ otpUserId }} -- {{ otp }}</h2>\r\n\t\t\t\t\t\t<p style=\"font-size: 12px;\">OTP has sent to you given mobile </p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"justify-content-center form_container mt-2 pl-5 pr-5 pt-2\">\r\n\t\t\t\t\t\t<form class=\"login-form\">\r\n\t\t\t\t\t\t\t<div class=\"userInput\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" id='ist' maxlength=\"1\" onkeyup=\"clickEvent(this,'sec')\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" id=\"sec\" maxlength=\"1\" onkeyup=\"clickEvent(this,'third')\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" id=\"third\" maxlength=\"1\" onkeyup=\"clickEvent(this,'fourth')\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" id=\"fourth\" maxlength=\"1\" onkeyup=\"clickEvent(this,'fifth')\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" id=\"fifth\" maxlength=\"1\">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"mt-3\">\r\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn text-dark bg-info text-bold d-block w-100\" v-if=\"saveStatus == 1\"\r\n\t\t\t\t\t\t\t\t\t@click=\"onSubmit\">Login</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"mt-4\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<Loader v-if=\"loader\" />\r\n\t\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n//import axios from \"axios\";\r\n\r\nimport 'jquery/dist/jquery.min.js';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {useStore, mapGetters } from \"vuex\"\r\nexport default {\r\n\tcomponents:{\r\n   \r\n  \t},\r\n\tdata() {\r\n\t\tconst store = useStore();\r\n\t\treturn {\r\n\t\t\turl : this.backendUrl,\r\n\t\t\tphone: '',                             \r\n\t\t\tpassword: '',\r\n\t\t\t\r\n\t\t\tupdateStatus: 0,                                \r\n\t\t\tsaveStatus: 1,                                  \r\n\t\t\t// phone                                                          \r\n\t\t\terrorphone:0,                                                     \r\n\t\t\tphonemessage: '',\r\n\r\n\t\t\t// password                                                          \r\n\t\t\terrorPassword:0,                                                     \r\n\t\t\tPasswordmessage: '',\r\n\t\t\tinvalidphonePassword:0,\r\n\t\t\tloader: false,\r\n\t\t\treqDwn:{},\r\n\t\t\tstore,\r\n\t\t};\r\n  \t},\r\n\r\n\tcomputed: {\r\n    ...mapGetters([\"otpUserId\",\"otp\"]) \r\n\t},\r\n\r\n  \tmethods: {\r\n\t  \tonSubmit() {  \r\n\t\t\tif(this.phone !== '' && this.password !== ''){\r\n\t\t\t\tthis.axios                                                             \r\n\t\t\t\t\t.post(this.url+'/api/auth/otpVerify',{\r\n\t\t\t\t\tphone: this.phone,\r\n\t\t\t\t\tpassword: this.password,\r\n\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\tconsole.log(result);\r\n\t\t\t\t\t\tthis.invalidphonePassword='';\r\n\t\t\t\t\t\tvar userData = result.data.user;\r\n\t\t\t\t\t\tuserData.access_token = result.data.authorisation.token;\r\n\t\t\t\t\t\tuserData.token_type = result.data.authorisation.type;\r\n\t\t\t\t\t\tlocalStorage.setItem('user', JSON.stringify(userData));\r\n\t\t\t\t\t\tif(userData.role_id == 1){\r\n\t\t\t\t\t\t\tthis.$router.push({ path:'/dashboard'});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(userData.role_id == 2){\r\n\t\t\t\t\t\t\tthis.$router.push({ path:'/profile'});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error)=>{\r\n\t\t\t\t\t\tthis.errorphone = 0;\r\n\t\t\t\t\t\tthis.errorPassword = 0;\r\n\t\t\t\t\t\tthis.invalidphonePassword = 1;\r\n\t\t\t\t\t\tconsole.log(error.response.data.errors);\r\n\t\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tif (this.phone === '') {\r\n\t\t\t\t\tthis.errorphone = 1;\r\n\t\t\t\t} \r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.errorphone = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.password === '') {\r\n\t\t\t\t\tthis.errorPassword = 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorPassword = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n  \t\t}\r\n  \t},\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.s-header{\r\n\tposition: fixed;\r\n\ttop:0;\r\n\tleft:0;\r\n\twidth: 100%;\r\n\tpadding: 20px 0;\r\n\tbox-shadow: 0 0 5px 1px #cccccc;\r\n}\r\n\t\t.user_card {\r\n\t\t\tleft      : 50%;\r\n\t\t\ttop       : 50%;\r\n\t\t\tposition  : absolute;\r\n\t\t\ttransform : translate(-50%, -50%);\r\n\t\t\theight: 400px;\r\n\t\t\twidth: 450px;\r\n\t\t\tbackground: #ffffff;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\tflex-direction: column;\r\n\t\t\tpadding: 10px;\r\n\t\t\tbox-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n\t\t\t-webkit-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n\t\t\t-moz-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n\t\t\tborder-radius: 5px;\r\n\r\n\t\t}\r\n\t\t.brand_logo_container {\r\n\t\t\tposition: absolute;\r\n\t\t\theight: 170px;\r\n\t\t\twidth: 170px;\r\n\t\t\ttop: -60px;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tbackground: #ffffff;\r\n\t\t\tpadding: 10px;\r\n\t\t\ttext-align: center;\r\n      transform: scale(0.75);\r\n\t\t}\r\n\t\t.brand_logo {\r\n\t\t\theight: 130px;\r\n\t\t\twidth: 130px;\r\n\t\t\tborder-radius: 20%;\r\n\t\t\t/* border: 2px solid #0a466e; */\r\n\t\t}\r\n\t\t.form_container {\r\n\t\t\tmargin-top: 100px;\r\n\t\t}\r\n\t\t.userInput{\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n}\r\n\r\ninput{\r\n\tmargin: 10px;\r\n\theight: 35px;\r\n\twidth: 45px;\r\n\tborder: none;\r\n\tborder-radius: 5px;\r\n\ttext-align: center;\r\n\tfont-family: arimo;\r\n\tfont-size: 1.2rem;\r\n\tbackground: #eef2f3;\r\n\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}