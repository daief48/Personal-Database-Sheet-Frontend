{"ast":null,"code":"//import axios from \"axios\";\nimport 'jquery/dist/jquery.min.js';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useStore, mapGetters } from \"vuex\";\nexport default {\n  components: {},\n\n  data() {\n    const store = useStore();\n    return {\n      url: this.backendUrl,\n      phone: '',\n      password: '',\n      updateStatus: 0,\n      saveStatus: 1,\n      // phone                                                          \n      errorphone: 0,\n      phonemessage: '',\n      // password                                                          \n      errorPassword: 0,\n      Passwordmessage: '',\n      invalidphonePassword: 0,\n      loader: false,\n      reqDwn: {},\n      store,\n      otpCode: ''\n    };\n  },\n\n  computed: { ...mapGetters([\"otpUserId\", \"otp\"])\n  },\n  methods: {\n    handleOnComplete(value) {\n      console.log(\"OTP completed: \", value);\n    },\n\n    handleOnChange(value) {\n      console.log(\"OTP changed: \", value);\n      this.otpCode = value;\n    },\n\n    onSubmit() {\n      console.log(\"OTP changed: \", this.otp);\n\n      if (this.phone !== '' && this.password !== '') {\n        this.axios.post(this.url + '/api/auth/otpVerify', {\n          phone: this.phone,\n          password: this.password\n        }).then(result => {\n          console.log(result);\n          this.invalidphonePassword = '';\n          var userData = result.data.user;\n          userData.access_token = result.data.authorisation.token;\n          userData.token_type = result.data.authorisation.type;\n          localStorage.setItem('user', JSON.stringify(userData));\n\n          if (userData.role_id == 1) {\n            this.$router.push({\n              path: '/dashboard'\n            });\n          }\n\n          if (userData.role_id == 2) {\n            this.$router.push({\n              path: '/profile'\n            });\n          }\n        }).catch(error => {\n          this.errorphone = 0;\n          this.errorPassword = 0;\n          this.invalidphonePassword = 1;\n          console.log(error.response.data.errors);\n        });\n      } else {\n        if (this.phone === '') {\n          this.errorphone = 1;\n        } else {\n          this.errorphone = 0;\n        }\n\n        if (this.password === '') {\n          this.errorPassword = 1;\n        } else {\n          this.errorPassword = 0;\n        }\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["useStore","mapGetters","components","data","store","url","backendUrl","phone","password","updateStatus","saveStatus","errorphone","phonemessage","errorPassword","Passwordmessage","invalidphonePassword","loader","reqDwn","otpCode","computed","methods","handleOnComplete","value","console","log","handleOnChange","onSubmit","otp","axios","post","then","result","userData","user","access_token","authorisation","token","token_type","type","localStorage","setItem","JSON","stringify","role_id","$router","push","path","catch","error","response","errors"],"sourceRoot":"","sources":["/var/www/html/PMS_PROJECT/pds/src/components/VerifyOtp.vue"],"sourcesContent":["<template>\r\n\t<div class=\"\">\r\n\t\t<div class=\"container h-100\">\r\n\t\t\t<div class=\"s-header\">\r\n\t\t\t\t<div class=\"d-flex justify-content-center text-center\">\r\n\t\t\t\t\t<img width=\"45\" src=\"@/assets/img/govt_logo.png\"> <h3 class=\"m-0 p-1\">Department of Youth Development</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"custom-bg\">\r\n\r\n\t\t\t\t<div class=\"user_card mt-5\">\r\n\t\t\t\t\t<div class=\"justify-content-center text-center\">\r\n\t\t\t\t\t\t<h2 class=\"mt-2\" style=\"color:#2D76B7\">Verify OTP Number {{ otpUserId }} -- {{ otp }}</h2>\r\n\t\t\t\t\t\t<p class=\"pl-5 pr-5\" style=\"font-size: 16px;\">OTP has sent to you given mobile number. Set your 6 digit OTP Number to verify your account. </p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"justify-content-center form_container mt-2 pl-5 pr-5 pt-2\">\r\n\t\t\t\t\t\t<form class=\"otp-form\">\r\n\t\t\t\t\t\t\t<div style=\"display: flex; flex-direction: row\" class=\"pl-1\">\r\n\t\t\t\t\t\t\t\t<v-otp-input\r\n\t\t\t\t\t\t\t\t\tref=\"otpInput\"\r\n\t\t\t\t\t\t\t\t\tv-model:value=\"bindModal\"\r\n\t\t\t\t\t\t\t\t\tinput-classes=\"otp-input\"\r\n\t\t\t\t\t\t\t\t\tseparator=\":\"\r\n\t\t\t\t\t\t\t\t\t:num-inputs=\"6\"\r\n\t\t\t\t\t\t\t\t\t:should-auto-focus=\"true\"\r\n\t\t\t\t\t\t\t\t\tinput-type=\"letter-numeric\"\r\n\t\t\t\t\t\t\t\t\t:conditionalClass=\"['one', 'two', 'three', 'four', 'five', 'six']\"\r\n\t\t\t\t\t\t\t\t\t:placeholder=\"['*', '*', '*', '*', '*', '*']\"\r\n\t\t\t\t\t\t\t\t\t@on-change=\"handleOnChange\"\r\n\t\t\t\t\t\t\t\t\t@on-complete=\"handleOnComplete\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"mt-3\">\r\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn text-white btn-verify text-bold d-block w-100\" v-if=\"saveStatus == 1\"\r\n\t\t\t\t\t\t\t\t\t@click=\"onSubmit\">Verify</button>\r\n\t\t\t\t\t\t\t\t<p class=\"mt-2\" style=\"font-size:12px;\">Estimated time <span class=\"text-danger\"><strong>2 m</strong></span></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"mt-4\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n//import axios from \"axios\";\r\n\r\nimport 'jquery/dist/jquery.min.js';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {useStore, mapGetters } from \"vuex\"\r\n\r\nexport default {\r\n\tcomponents:{\r\n   \r\n  \t},\r\n\tdata() {\r\n\t\tconst store = useStore();\r\n\t\treturn {\r\n\t\t\turl : this.backendUrl,\r\n\t\t\tphone: '',                             \r\n\t\t\tpassword: '',\r\n\t\t\t\r\n\t\t\tupdateStatus: 0,                                \r\n\t\t\tsaveStatus: 1,                                  \r\n\t\t\t// phone                                                          \r\n\t\t\terrorphone:0,                                                     \r\n\t\t\tphonemessage: '',\r\n\r\n\t\t\t// password                                                          \r\n\t\t\terrorPassword:0,                                                     \r\n\t\t\tPasswordmessage: '',\r\n\t\t\tinvalidphonePassword:0,\r\n\t\t\tloader: false,\r\n\t\t\treqDwn:{},\r\n\t\t\tstore,\r\n\t\t\totpCode:'',\r\n\r\n\t\t};\r\n  \t},\r\n\r\n\tcomputed: {\r\n    ...mapGetters([\"otpUserId\",\"otp\"]) \r\n\t},\r\n\r\n  \tmethods: {\r\n\r\n\t\thandleOnComplete(value){\r\n\t\tconsole.log(\"OTP completed: \", value);\r\n\t\t\r\n\t\t},\r\n\r\n\t\thandleOnChange(value){\r\n\t\tconsole.log(\"OTP changed: \", value);\r\n\t\tthis.otpCode = value;\r\n\t\t},\r\n\r\n\t  \tonSubmit() {  \r\n\t\t\tconsole.log(\"OTP changed: \", this.otp);\r\n\t\t\tif(this.phone !== '' && this.password !== ''){\r\n\t\t\t\tthis.axios                                                             \r\n\t\t\t\t\t.post(this.url+'/api/auth/otpVerify',{\r\n\t\t\t\t\tphone: this.phone,\r\n\t\t\t\t\tpassword: this.password,\r\n\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\tconsole.log(result);\r\n\t\t\t\t\t\tthis.invalidphonePassword='';\r\n\t\t\t\t\t\tvar userData = result.data.user;\r\n\t\t\t\t\t\tuserData.access_token = result.data.authorisation.token;\r\n\t\t\t\t\t\tuserData.token_type = result.data.authorisation.type;\r\n\t\t\t\t\t\tlocalStorage.setItem('user', JSON.stringify(userData));\r\n\t\t\t\t\t\tif(userData.role_id == 1){\r\n\t\t\t\t\t\t\tthis.$router.push({ path:'/dashboard'});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(userData.role_id == 2){\r\n\t\t\t\t\t\t\tthis.$router.push({ path:'/profile'});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error)=>{\r\n\t\t\t\t\t\tthis.errorphone = 0;\r\n\t\t\t\t\t\tthis.errorPassword = 0;\r\n\t\t\t\t\t\tthis.invalidphonePassword = 1;\r\n\t\t\t\t\t\tconsole.log(error.response.data.errors);\r\n\t\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tif (this.phone === '') {\r\n\t\t\t\t\tthis.errorphone = 1;\r\n\t\t\t\t} \r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.errorphone = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.password === '') {\r\n\t\t\t\t\tthis.errorPassword = 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorPassword = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n  \t\t}\r\n  \t},\r\n\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n.s-header{\r\n\tposition: absolute;\r\n\ttop:0;\r\n\tleft:0;\r\n\twidth: 100%;\r\n\tpadding: 20px 0;\r\n\tbox-shadow: 0 0 5px 1px #cccccc;\r\n\tz-index: 9;\r\n}\r\n.custom-bg{\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n\tz-index: 0;\r\n\tleft: 0;\r\n}\r\n.btn-verify{\r\n\tbackground: rgb(45, 118, 183);\r\n}\r\n\r\n.user_card {\r\n\tleft      : 50%;\r\n\ttop       : 50%;\r\n\tposition  : absolute;\r\n\ttransform : translate(-50%, -50%);\r\n\theight: 400px;\r\n\twidth: 450px;\r\n\tbackground: #ffffff;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\tflex-direction: column;\r\n\tpadding: 10px;\r\n\tbox-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n\t-webkit-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n\t-moz-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n\tborder-radius: 5px;\r\n\r\n}\r\n.brand_logo_container {\r\n\tposition: absolute;\r\n\theight: 170px;\r\n\twidth: 170px;\r\n\ttop: -60px;\r\n\tborder-radius: 50%;\r\n\tbackground: #ffffff;\r\n\tpadding: 10px;\r\n\ttext-align: center;\r\ntransform: scale(0.75);\r\n}\r\n.brand_logo {\r\n\theight: 130px;\r\n\twidth: 130px;\r\n\tborder-radius: 20%;\r\n\t/* border: 2px solid #0a466e; */\r\n}\r\n.form_container {\r\n\tmargin-top: 100px;\r\n}\r\n.userInput{\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n}\r\n\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}